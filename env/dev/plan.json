{"format_version":"1.2","terraform_version":"1.5.7","variables":{"alb_configs":{"value":{"private_alb":{"alb_idle_timeout":60,"alb_internal":true,"alb_name":"dev-private-alb","alb_security_groups":["sg-0987654321fedcba"],"alb_type":"application","default_http_action_type":"forward","default_https_action_type":"forward","health_check_healthy_threshold":2,"health_check_interval":30,"health_check_matcher":"200-299","health_check_path":"/health","health_check_timeout":5,"health_check_unhealthy_threshold":2,"listener_http_port":80,"listener_http_protocol":"HTTP","listener_https_port":443,"listener_https_protocol":"HTTPS","redirect_http_port":"443","redirect_http_protocol":"HTTPS","redirect_http_status_code":"HTTP_301","ssl_certificate_arn":"arn:aws:acm:ap-northeast-2:512900982215:certificate/9f22d2e2-0fcb-436b-91ab-86047d3911b1","ssl_policy":"ELBSecurityPolicy-2021-08","tg_name":"dev-private-tg","tg_port":80,"tg_protocol":"HTTP","tg_target_id":"192.168.1.10","tg_target_type":"ip"},"public_alb":{"alb_idle_timeout":60,"alb_internal":false,"alb_name":"dev-public-alb","alb_security_groups":["sg-0123456789abcdef0"],"alb_type":"application","default_http_action_type":"redirect","default_https_action_type":"forward","health_check_healthy_threshold":2,"health_check_interval":30,"health_check_matcher":"200-299","health_check_path":"/health","health_check_timeout":5,"health_check_unhealthy_threshold":2,"listener_http_port":80,"listener_http_protocol":"HTTP","listener_https_port":443,"listener_https_protocol":"HTTPS","redirect_http_port":"443","redirect_http_protocol":"HTTPS","redirect_http_status_code":"HTTP_301","ssl_certificate_arn":"arn:aws:acm:ap-northeast-2:512900982215:certificate/9f22d2e2-0fcb-436b-91ab-86047d3911b1","ssl_policy":"ELBSecurityPolicy-2021-08","tg_name":"dev-public-tg","tg_port":80,"tg_protocol":"HTTP","tg_target_id":"i-0123456789abcdef0","tg_target_type":"instance"}}},"allocated_storage":{"value":20},"autoscaling_desired_capacity":{"value":2},"autoscaling_max_size":{"value":4},"autoscaling_min_size":{"value":1},"availability_zones":{"value":{"0":"ap-northeast-2a","1":"ap-northeast-2c"}},"db_engine":{"value":"mysql"},"db_engine_version":{"value":"8.0"},"db_instance_class":{"value":"db.t3.medium"},"db_name":{"value":"mydatabase"},"db_parameter_group_name":{"value":"default.mysql8.0"},"db_password":{"value":"securepassword"},"db_security_group_ids":{"value":[]},"db_subnet_group_name":{"value":"dev-db-subnet-group"},"db_subnet_group_tag_name":{"value":"dev-db-subnet-group"},"db_subnet_ids":{"value":[]},"db_subnets_cidr":{"value":["10.0.5.0/24","10.0.6.0/24"]},"db_username":{"value":"admin"},"ecs_clusters":{"value":{"main":{"name":"dev-ecs-cluster"}}},"ecs_instance_name_prefix":{"value":"ecs-instance"},"ecs_instance_profile_name":{"value":"ecsInstanceProfile"},"ecs_service_ami_name":{"value":"amzn2-ami-ecs-hvm-2.0.20211202-x86_64-ebs"},"ecs_service_instance_type":{"value":"t3.micro"},"ecs_services":{"value":{"api_service":{"cluster_name":"main","container_name":"api-server","container_port":80,"desired_count":2,"iam_role":"","launch_type":"EC2","name":"api-service","security_groups":[],"subnets":[],"target_group_arn":"arn:aws:elasticloadbalancing:ap-northeast-2:123456789012:targetgroup/dev-public-tg","task_definition_family":"api_server"}}},"ecs_task_definitions":{"value":{"api_server":{"container_definitions":[{"cpu":256,"environment":[{"name":"ENV","value":"DEV"}],"image":"nginx:latest","log_configuration":{"logDriver":"awslogs","options":{"awslogs-group":"/ecs/api-server","awslogs-region":"ap-northeast-2","awslogs-stream-prefix":"api"}},"memory":512,"name":"api-server","port_mappings":[{"container_port":80,"host_port":80}]}],"cpu":"512","execution_role_arn":"","family":"dev-api-server","memory":"1024","network_mode":"bridge","requires_compatibilities":["EC2"],"task_role_arn":""}}},"environment":{"value":"DEV"},"multi_az":{"value":false},"private_subnet_ids":{"value":[]},"private_subnets_cidr":{"value":["10.0.3.0/24","10.0.4.0/24"]},"public_subnets_cidr":{"value":["10.0.1.0/24","10.0.2.0/24"]},"publicly_accessible":{"value":false},"rds_environment":{"value":"dev"},"sg_configs":{"value":{"alb_sg":{"description":"Security group for ALB","name":"alb-sg"},"ecs_instance_sg":{"description":"Security group for ECS Instances","name":"ecs-instance-sg"},"ecs_sg":{"description":"Security group for ECS","name":"ecs-sg"},"rds_sg":{"description":"Security group for RDS","name":"rds-sg"}}},"sg_rules":{"value":{"alb_egress_all":{"cidr_blocks":["0.0.0.0/0"],"description":"Allow all egress from ALB","from_port":0,"protocol":"-1","sg_name":"alb_sg","to_port":0,"type":"egress"},"alb_ingress_http":{"cidr_blocks":["59.5.15.55/32","10.212.134.0/24"],"description":"HTTP access to ALB","from_port":80,"protocol":"tcp","sg_name":"alb_sg","to_port":80,"type":"ingress"},"alb_ingress_https":{"cidr_blocks":["59.5.15.55/32","10.212.134.0/24"],"description":"HTTPS access to ALB","from_port":443,"protocol":"tcp","sg_name":"alb_sg","to_port":443,"type":"ingress"},"ecs_egress_all":{"cidr_blocks":["0.0.0.0/0"],"description":"Allow all egress from ECS Instance","from_port":0,"protocol":"-1","sg_name":"ecs_instance_sg","to_port":0,"type":"egress"},"ecs_instance_ingress_ssh":{"cidr_blocks":[],"description":"SSH access to ECS Instance","from_port":22,"protocol":"tcp","sg_name":"ecs_instance_sg","source_sg_name":"alb_sg","to_port":22,"type":"ingress"},"ecs_service_egress_all":{"cidr_blocks":["0.0.0.0/0"],"description":"Allow all egress from ECS Service","from_port":0,"protocol":"-1","sg_name":"ecs_sg","to_port":0,"type":"egress"},"ecs_service_ingress_http":{"cidr_blocks":[],"description":"HTTP access from ALB to ECS Service","from_port":80,"protocol":"tcp","sg_name":"ecs_sg","source_sg_name":"alb_sg","to_port":80,"type":"ingress"},"ecs_service_ingress_https":{"cidr_blocks":[],"description":"HTTPS access from ALB to ECS Service","from_port":443,"protocol":"tcp","sg_name":"ecs_sg","source_sg_name":"alb_sg","to_port":443,"type":"ingress"},"rds_egress_all":{"cidr_blocks":["0.0.0.0/0"],"description":"Allow all egress from RDS","from_port":0,"protocol":"-1","sg_name":"rds_sg","to_port":0,"type":"egress"},"rds_ingress_ecs":{"cidr_blocks":[],"description":"Access from ECS to RDS","from_port":1433,"protocol":"tcp","sg_name":"rds_sg","source_sg_name":"ecs_sg","to_port":1433,"type":"ingress"}}},"skip_final_snapshot":{"value":true},"storage_type":{"value":"gp2"},"target_group_arns":{"value":{}},"target_groups":{"value":{"api_tg":{"health_check_interval":30,"health_check_matcher":"200-299","health_check_path":"/health","health_check_timeout":5,"healthy_threshold":2,"name":"api-tg","port":80,"protocol":"HTTP","target_type":"ip","tg_target_id":"","unhealthy_threshold":2}}},"vpc_cidr":{"value":"10.0.0.0/16"}},"planned_values":{"root_module":{"resources":[{"address":"aws_iam_instance_profile.ecs_instance_profile","mode":"managed","type":"aws_iam_instance_profile","name":"ecs_instance_profile","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"name":"ecs-instance-profile","path":"/","role":"ecs-execution-role","tags":null},"sensitive_values":{"tags_all":{}}},{"address":"aws_iam_policy.ecs_service_policy","mode":"managed","type":"aws_iam_policy","name":"ecs_service_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":"Policy for ECS services","name":"ecs-service-policy","path":"/","policy":"{\"Statement\":[{\"Action\":[\"elasticloadbalancing:*\",\"ec2:Describe*\",\"cloudwatch:PutMetricData\",\"logs:CreateLogStream\",\"logs:PutLogEvents\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}],\"Version\":\"2012-10-17\"}","tags":null},"sensitive_values":{"tags_all":{}}},{"address":"aws_iam_policy.ecs_task_execution_policy","mode":"managed","type":"aws_iam_policy","name":"ecs_task_execution_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":"Policy for ECS task execution to pull images and send logs","name":"ecs-task-execution-policy","path":"/","policy":"{\"Statement\":[{\"Action\":[\"ecr:GetDownloadUrlForLayer\",\"ecr:BatchGetImage\",\"ecr:BatchCheckLayerAvailability\"],\"Effect\":\"Allow\",\"Resource\":\"*\"},{\"Action\":[\"logs:CreateLogStream\",\"logs:PutLogEvents\"],\"Effect\":\"Allow\",\"Resource\":\"*\"},{\"Action\":[\"ssm:GetParameters\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}],\"Version\":\"2012-10-17\"}","tags":null},"sensitive_values":{"tags_all":{}}},{"address":"aws_iam_policy.ecs_task_role_policy","mode":"managed","type":"aws_iam_policy","name":"ecs_task_role_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":"Policy for ECS task role","name":"ecs-task-role-policy","path":"/","policy":"{\"Statement\":[{\"Action\":[\"s3:GetObject\",\"s3:PutObject\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}],\"Version\":\"2012-10-17\"}","tags":null},"sensitive_values":{"tags_all":{}}},{"address":"aws_iam_role.ecs_execution_role","mode":"managed","type":"aws_iam_role","name":"ecs_execution_role","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ecs-tasks.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"ecs-execution-role","path":"/","permissions_boundary":null,"tags":null},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}}},{"address":"aws_iam_role.ecs_service_role","mode":"managed","type":"aws_iam_role","name":"ecs_service_role","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ecs.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"ecs-service-role","path":"/","permissions_boundary":null,"tags":null},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}}},{"address":"aws_iam_role.ecs_task_role","mode":"managed","type":"aws_iam_role","name":"ecs_task_role","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ecs-tasks.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"ecs-task-role","path":"/","permissions_boundary":null,"tags":null},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}}},{"address":"aws_iam_role_policy_attachment.ecs_execution_role_attach","mode":"managed","type":"aws_iam_role_policy_attachment","name":"ecs_execution_role_attach","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"role":"ecs-execution-role"},"sensitive_values":{}},{"address":"aws_iam_role_policy_attachment.ecs_service_role_attach","mode":"managed","type":"aws_iam_role_policy_attachment","name":"ecs_service_role_attach","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"role":"ecs-service-role"},"sensitive_values":{}},{"address":"aws_iam_role_policy_attachment.ecs_task_role_attach","mode":"managed","type":"aws_iam_role_policy_attachment","name":"ecs_task_role_attach","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"role":"ecs-task-role"},"sensitive_values":{}}],"child_modules":[{"resources":[{"address":"module.alb[\"private_alb\"].aws_lb.this","mode":"managed","type":"aws_lb","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"access_logs":[],"client_keep_alive":3600,"connection_logs":[],"customer_owned_ipv4_pool":null,"desync_mitigation_mode":"defensive","dns_record_client_routing_policy":null,"drop_invalid_header_fields":false,"enable_cross_zone_load_balancing":null,"enable_deletion_protection":false,"enable_http2":true,"enable_tls_version_and_cipher_suite_headers":false,"enable_waf_fail_open":false,"enable_xff_client_port":false,"idle_timeout":60,"internal":true,"load_balancer_type":"application","name":"dev-private-alb","preserve_host_header":false,"security_groups":["sg-0987654321fedcba"],"tags":{"Environment":"DEV","Name":"dev-private-alb"},"tags_all":{"Environment":"DEV","Name":"dev-private-alb"},"timeouts":null,"xff_header_processing_mode":"append"},"sensitive_values":{"access_logs":[],"connection_logs":[],"security_groups":[false],"subnet_mapping":[],"subnets":[],"tags":{},"tags_all":{}}},{"address":"module.alb[\"private_alb\"].aws_lb_listener.listener_http[\"api_tg\"]","mode":"managed","type":"aws_lb_listener","name":"listener_http","index":"api_tg","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"alpn_policy":null,"certificate_arn":null,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[],"type":"forward"}],"port":80,"protocol":"HTTP","tags":null,"timeouts":null},"sensitive_values":{"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[]}],"mutual_authentication":[],"tags_all":{}}},{"address":"module.alb[\"private_alb\"].aws_lb_listener.listener_https[\"api_tg\"]","mode":"managed","type":"aws_lb_listener","name":"listener_https","index":"api_tg","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"alpn_policy":null,"certificate_arn":"arn:aws:acm:ap-northeast-2:512900982215:certificate/9f22d2e2-0fcb-436b-91ab-86047d3911b1","default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[],"type":"forward"}],"port":443,"protocol":"HTTPS","ssl_policy":"ELBSecurityPolicy-2021-08","tags":null,"timeouts":null},"sensitive_values":{"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[]}],"mutual_authentication":[],"tags_all":{}}},{"address":"module.alb[\"private_alb\"].aws_lb_target_group.tg[\"api_tg\"]","mode":"managed","type":"aws_lb_target_group","name":"tg","index":"api_tg","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"deregistration_delay":"300","health_check":[{"enabled":true,"healthy_threshold":2,"interval":30,"matcher":"200-299","path":"/health","port":"traffic-port","protocol":"HTTP","timeout":5,"unhealthy_threshold":2}],"lambda_multi_value_headers_enabled":false,"name":"api-tg","port":80,"protocol":"HTTP","proxy_protocol_v2":false,"slow_start":0,"tags":{"Name":"DEV-api-tg"},"tags_all":{"Name":"DEV-api-tg"},"target_type":"ip"},"sensitive_values":{"health_check":[{}],"load_balancer_arns":[],"stickiness":[],"tags":{},"tags_all":{},"target_failover":[],"target_group_health":[],"target_health_state":[]}},{"address":"module.alb[\"private_alb\"].aws_lb_target_group_attachment.tg_attachment[\"api_tg\"]","mode":"managed","type":"aws_lb_target_group_attachment","name":"tg_attachment","index":"api_tg","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"availability_zone":null,"port":80,"target_id":"192.168.1.10"},"sensitive_values":{}}],"address":"module.alb[\"private_alb\"]"},{"resources":[{"address":"module.alb[\"public_alb\"].aws_lb.this","mode":"managed","type":"aws_lb","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"access_logs":[],"client_keep_alive":3600,"connection_logs":[],"customer_owned_ipv4_pool":null,"desync_mitigation_mode":"defensive","dns_record_client_routing_policy":null,"drop_invalid_header_fields":false,"enable_cross_zone_load_balancing":null,"enable_deletion_protection":false,"enable_http2":true,"enable_tls_version_and_cipher_suite_headers":false,"enable_waf_fail_open":false,"enable_xff_client_port":false,"idle_timeout":60,"internal":false,"load_balancer_type":"application","name":"dev-public-alb","preserve_host_header":false,"security_groups":["sg-0123456789abcdef0"],"tags":{"Environment":"DEV","Name":"dev-public-alb"},"tags_all":{"Environment":"DEV","Name":"dev-public-alb"},"timeouts":null,"xff_header_processing_mode":"append"},"sensitive_values":{"access_logs":[],"connection_logs":[],"security_groups":[false],"subnet_mapping":[],"subnets":[],"tags":{},"tags_all":{}}},{"address":"module.alb[\"public_alb\"].aws_lb_listener.listener_http[\"api_tg\"]","mode":"managed","type":"aws_lb_listener","name":"listener_http","index":"api_tg","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"alpn_policy":null,"certificate_arn":null,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[{"host":"#{host}","path":"/#{path}","port":"443","protocol":"HTTPS","query":"#{query}","status_code":"HTTP_301"}],"type":"redirect"}],"port":80,"protocol":"HTTP","tags":null,"timeouts":null},"sensitive_values":{"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[{}]}],"mutual_authentication":[],"tags_all":{}}},{"address":"module.alb[\"public_alb\"].aws_lb_listener.listener_https[\"api_tg\"]","mode":"managed","type":"aws_lb_listener","name":"listener_https","index":"api_tg","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"alpn_policy":null,"certificate_arn":"arn:aws:acm:ap-northeast-2:512900982215:certificate/9f22d2e2-0fcb-436b-91ab-86047d3911b1","default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[],"type":"forward"}],"port":443,"protocol":"HTTPS","ssl_policy":"ELBSecurityPolicy-2021-08","tags":null,"timeouts":null},"sensitive_values":{"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[]}],"mutual_authentication":[],"tags_all":{}}},{"address":"module.alb[\"public_alb\"].aws_lb_target_group.tg[\"api_tg\"]","mode":"managed","type":"aws_lb_target_group","name":"tg","index":"api_tg","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"deregistration_delay":"300","health_check":[{"enabled":true,"healthy_threshold":2,"interval":30,"matcher":"200-299","path":"/health","port":"traffic-port","protocol":"HTTP","timeout":5,"unhealthy_threshold":2}],"lambda_multi_value_headers_enabled":false,"name":"api-tg","port":80,"protocol":"HTTP","proxy_protocol_v2":false,"slow_start":0,"tags":{"Name":"DEV-api-tg"},"tags_all":{"Name":"DEV-api-tg"},"target_type":"ip"},"sensitive_values":{"health_check":[{}],"load_balancer_arns":[],"stickiness":[],"tags":{},"tags_all":{},"target_failover":[],"target_group_health":[],"target_health_state":[]}},{"address":"module.alb[\"public_alb\"].aws_lb_target_group_attachment.tg_attachment[\"api_tg\"]","mode":"managed","type":"aws_lb_target_group_attachment","name":"tg_attachment","index":"api_tg","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"availability_zone":null,"port":80,"target_id":"i-0123456789abcdef0"},"sensitive_values":{}}],"address":"module.alb[\"public_alb\"]"},{"resources":[{"address":"module.ecs.aws_autoscaling_group.ecs","mode":"managed","type":"aws_autoscaling_group","name":"ecs","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"capacity_rebalance":null,"context":null,"default_instance_warmup":null,"desired_capacity":2,"desired_capacity_type":null,"enabled_metrics":null,"force_delete":false,"force_delete_warm_pool":false,"health_check_grace_period":300,"ignore_failed_scaling_activities":false,"initial_lifecycle_hook":[],"instance_maintenance_policy":[],"instance_refresh":[],"launch_configuration":null,"launch_template":[{"version":"$Latest"}],"max_instance_lifetime":null,"max_size":4,"metrics_granularity":"1Minute","min_elb_capacity":null,"min_size":1,"placement_group":null,"protect_from_scale_in":false,"suspended_processes":null,"tag":[{"key":"Name","propagate_at_launch":true,"value":"ecs-instance"}],"termination_policies":null,"timeouts":null,"wait_for_capacity_timeout":"10m","wait_for_elb_capacity":null,"warm_pool":[]},"sensitive_values":{"availability_zones":[],"initial_lifecycle_hook":[],"instance_maintenance_policy":[],"instance_refresh":[],"launch_template":[{}],"load_balancers":[],"mixed_instances_policy":[],"tag":[{}],"target_group_arns":[],"traffic_source":[],"vpc_zone_identifier":[],"warm_pool":[]}},{"address":"module.ecs.aws_ecs_cluster.this[\"main\"]","mode":"managed","type":"aws_ecs_cluster","name":"this","index":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"configuration":[],"name":"dev-ecs-cluster","service_connect_defaults":[],"tags":null},"sensitive_values":{"configuration":[],"service_connect_defaults":[],"setting":[],"tags_all":{}}},{"address":"module.ecs.aws_ecs_service.this[\"api_service\"]","mode":"managed","type":"aws_ecs_service","name":"this","index":"api_service","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"alarms":[],"capacity_provider_strategy":[],"deployment_circuit_breaker":[],"deployment_controller":[],"deployment_maximum_percent":200,"deployment_minimum_healthy_percent":100,"desired_count":2,"enable_ecs_managed_tags":false,"enable_execute_command":false,"force_delete":null,"force_new_deployment":null,"health_check_grace_period_seconds":null,"launch_type":"EC2","load_balancer":[{"container_name":"api-server","container_port":80,"elb_name":"","target_group_arn":""}],"name":"api-service","network_configuration":[{"assign_public_ip":false}],"ordered_placement_strategy":[],"placement_constraints":[],"propagate_tags":null,"scheduling_strategy":"REPLICA","service_connect_configuration":[],"service_registries":[],"tags":null,"timeouts":null,"volume_configuration":[],"wait_for_steady_state":false},"sensitive_values":{"alarms":[],"capacity_provider_strategy":[],"deployment_circuit_breaker":[],"deployment_controller":[],"load_balancer":[{}],"network_configuration":[{"security_groups":[],"subnets":[]}],"ordered_placement_strategy":[],"placement_constraints":[],"service_connect_configuration":[],"service_registries":[],"tags_all":{},"triggers":{},"volume_configuration":[]}},{"address":"module.ecs.aws_ecs_task_definition.this[\"api_server\"]","mode":"managed","type":"aws_ecs_task_definition","name":"this","index":"api_server","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"container_definitions":"[{\"cpu\":256,\"environment\":[{\"name\":\"ENV\",\"value\":\"DEV\"}],\"essential\":true,\"image\":\"nginx:latest\",\"logConfiguration\":{\"logDriver\":\"awslogs\",\"options\":{\"awslogs-group\":\"/ecs/api-server\",\"awslogs-region\":\"ap-northeast-2\",\"awslogs-stream-prefix\":\"api\"}},\"memory\":512,\"name\":\"api-server\",\"portMappings\":[]}]","cpu":"512","ephemeral_storage":[],"family":"dev-api-server","inference_accelerator":[],"ipc_mode":null,"memory":"1024","network_mode":"bridge","pid_mode":null,"placement_constraints":[],"proxy_configuration":[],"requires_compatibilities":["EC2"],"runtime_platform":[],"skip_destroy":false,"tags":null,"track_latest":false,"volume":[]},"sensitive_values":{"ephemeral_storage":[],"inference_accelerator":[],"placement_constraints":[],"proxy_configuration":[],"requires_compatibilities":[false],"runtime_platform":[],"tags_all":{},"volume":[]}},{"address":"module.ecs.aws_launch_template.ecs","mode":"managed","type":"aws_launch_template","name":"ecs","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"block_device_mappings":[],"capacity_reservation_specification":[],"cpu_options":[],"credit_specification":[],"description":null,"disable_api_stop":null,"disable_api_termination":null,"ebs_optimized":null,"elastic_gpu_specifications":[],"elastic_inference_accelerator":[],"enclave_options":[],"hibernation_options":[],"iam_instance_profile":[{"arn":null,"name":"ecs-instance-profile"}],"image_id":"amzn2-ami-ecs-hvm-2.0.20211202-x86_64-ebs","instance_initiated_shutdown_behavior":null,"instance_market_options":[],"instance_requirements":[],"instance_type":"t3.micro","kernel_id":null,"key_name":null,"license_specification":[],"maintenance_options":[],"monitoring":[],"name_prefix":"ecs-launch-template-","network_interfaces":[],"placement":[],"private_dns_name_options":[],"ram_disk_id":null,"security_group_names":null,"tag_specifications":[{"resource_type":"instance","tags":{"Name":"ecs-instance"}}],"tags":null,"update_default_version":null,"user_data":"ICAjIS9iaW4vYmFzaAogIGVjaG8gRUNTX0NMVVNURVI9ZGV2LWVjcy1jbHVzdGVyID4+IC9ldGMvZWNzL2Vjcy5jb25maWcK"},"sensitive_values":{"block_device_mappings":[],"capacity_reservation_specification":[],"cpu_options":[],"credit_specification":[],"elastic_gpu_specifications":[],"elastic_inference_accelerator":[],"enclave_options":[],"hibernation_options":[],"iam_instance_profile":[{}],"instance_market_options":[],"instance_requirements":[],"license_specification":[],"maintenance_options":[],"metadata_options":[],"monitoring":[],"network_interfaces":[],"placement":[],"private_dns_name_options":[],"tag_specifications":[{"tags":{}}],"tags_all":{},"vpc_security_group_ids":[]}}],"address":"module.ecs"},{"resources":[{"address":"module.rds.aws_db_instance.rds","mode":"managed","type":"aws_db_instance","name":"rds","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"allocated_storage":20,"allow_major_version_upgrade":null,"apply_immediately":false,"auto_minor_version_upgrade":true,"blue_green_update":[],"copy_tags_to_snapshot":false,"custom_iam_instance_profile":null,"customer_owned_ip_enabled":null,"db_name":"mydatabase","db_subnet_group_name":"dev-db-subnet-group","dedicated_log_volume":false,"delete_automated_backups":true,"deletion_protection":null,"domain":null,"domain_auth_secret_arn":null,"domain_dns_ips":null,"domain_iam_role_name":null,"domain_ou":null,"enabled_cloudwatch_logs_exports":null,"engine":"mysql","engine_version":"8.0","final_snapshot_identifier":null,"iam_database_authentication_enabled":null,"identifier":"rds-dev-mydatabase","instance_class":"db.t3.medium","manage_master_user_password":null,"max_allocated_storage":null,"monitoring_interval":0,"multi_az":false,"parameter_group_name":"default.mysql8.0","password":"securepassword","performance_insights_enabled":false,"publicly_accessible":false,"replicate_source_db":null,"restore_to_point_in_time":[],"s3_import":[],"skip_final_snapshot":true,"storage_encrypted":null,"storage_type":"gp2","tags":{"Environment":"dev","Name":"mydatabase"},"tags_all":{"Environment":"dev","Name":"mydatabase"},"timeouts":null,"upgrade_storage_config":null,"username":"admin"},"sensitive_values":{"blue_green_update":[],"listener_endpoint":[],"master_user_secret":[],"password":true,"replicas":[],"restore_to_point_in_time":[],"s3_import":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[]}},{"address":"module.rds.aws_db_subnet_group.db_subnet_group","mode":"managed","type":"aws_db_subnet_group","name":"db_subnet_group","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":"Managed by Terraform","name":"dev-db-subnet-group","tags":{"Environment":"dev","Name":"dev-db-subnet-group"},"tags_all":{"Environment":"dev","Name":"dev-db-subnet-group"}},"sensitive_values":{"subnet_ids":[],"supported_network_types":[],"tags":{},"tags_all":{}}}],"address":"module.rds"},{"resources":[{"address":"module.sg.aws_security_group.sg[\"alb_sg\"]","mode":"managed","type":"aws_security_group","name":"sg","index":"alb_sg","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"description":"Security group for ALB","name":"alb-sg","revoke_rules_on_delete":false,"tags":{"Name":"alb-sg"},"tags_all":{"Name":"alb-sg"},"timeouts":null},"sensitive_values":{"egress":[],"ingress":[],"tags":{},"tags_all":{}}},{"address":"module.sg.aws_security_group.sg[\"ecs_instance_sg\"]","mode":"managed","type":"aws_security_group","name":"sg","index":"ecs_instance_sg","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"description":"Security group for ECS Instances","name":"ecs-instance-sg","revoke_rules_on_delete":false,"tags":{"Name":"ecs-instance-sg"},"tags_all":{"Name":"ecs-instance-sg"},"timeouts":null},"sensitive_values":{"egress":[],"ingress":[],"tags":{},"tags_all":{}}},{"address":"module.sg.aws_security_group.sg[\"ecs_sg\"]","mode":"managed","type":"aws_security_group","name":"sg","index":"ecs_sg","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"description":"Security group for ECS","name":"ecs-sg","revoke_rules_on_delete":false,"tags":{"Name":"ecs-sg"},"tags_all":{"Name":"ecs-sg"},"timeouts":null},"sensitive_values":{"egress":[],"ingress":[],"tags":{},"tags_all":{}}},{"address":"module.sg.aws_security_group.sg[\"rds_sg\"]","mode":"managed","type":"aws_security_group","name":"sg","index":"rds_sg","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"description":"Security group for RDS","name":"rds-sg","revoke_rules_on_delete":false,"tags":{"Name":"rds-sg"},"tags_all":{"Name":"rds-sg"},"timeouts":null},"sensitive_values":{"egress":[],"ingress":[],"tags":{},"tags_all":{}}},{"address":"module.sg.aws_security_group_rule.egress[\"alb_egress_all\"]","mode":"managed","type":"aws_security_group_rule","name":"egress","index":"alb_egress_all","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"cidr_blocks":["0.0.0.0/0"],"description":"Allow all egress from ALB","from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","self":false,"timeouts":null,"to_port":0,"type":"egress"},"sensitive_values":{"cidr_blocks":[false]}},{"address":"module.sg.aws_security_group_rule.egress[\"ecs_egress_all\"]","mode":"managed","type":"aws_security_group_rule","name":"egress","index":"ecs_egress_all","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"cidr_blocks":["0.0.0.0/0"],"description":"Allow all egress from ECS Instance","from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","self":false,"timeouts":null,"to_port":0,"type":"egress"},"sensitive_values":{"cidr_blocks":[false]}},{"address":"module.sg.aws_security_group_rule.egress[\"ecs_service_egress_all\"]","mode":"managed","type":"aws_security_group_rule","name":"egress","index":"ecs_service_egress_all","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"cidr_blocks":["0.0.0.0/0"],"description":"Allow all egress from ECS Service","from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","self":false,"timeouts":null,"to_port":0,"type":"egress"},"sensitive_values":{"cidr_blocks":[false]}},{"address":"module.sg.aws_security_group_rule.egress[\"rds_egress_all\"]","mode":"managed","type":"aws_security_group_rule","name":"egress","index":"rds_egress_all","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"cidr_blocks":["0.0.0.0/0"],"description":"Allow all egress from RDS","from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","self":false,"timeouts":null,"to_port":0,"type":"egress"},"sensitive_values":{"cidr_blocks":[false]}},{"address":"module.sg.aws_security_group_rule.ingress_cidr[\"alb_ingress_http_cidr\"]","mode":"managed","type":"aws_security_group_rule","name":"ingress_cidr","index":"alb_ingress_http_cidr","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"cidr_blocks":["59.5.15.55/32","10.212.134.0/24"],"description":"HTTP access to ALB","from_port":80,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","self":false,"timeouts":null,"to_port":80,"type":"ingress"},"sensitive_values":{"cidr_blocks":[false,false]}},{"address":"module.sg.aws_security_group_rule.ingress_cidr[\"alb_ingress_https_cidr\"]","mode":"managed","type":"aws_security_group_rule","name":"ingress_cidr","index":"alb_ingress_https_cidr","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"cidr_blocks":["59.5.15.55/32","10.212.134.0/24"],"description":"HTTPS access to ALB","from_port":443,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","self":false,"timeouts":null,"to_port":443,"type":"ingress"},"sensitive_values":{"cidr_blocks":[false,false]}},{"address":"module.sg.aws_security_group_rule.ingress_self[\"ecs_instance_ingress_ssh_self\"]","mode":"managed","type":"aws_security_group_rule","name":"ingress_self","index":"ecs_instance_ingress_ssh_self","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"cidr_blocks":null,"description":"SSH access to ECS Instance","from_port":22,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","self":true,"timeouts":null,"to_port":22,"type":"ingress"},"sensitive_values":{}},{"address":"module.sg.aws_security_group_rule.ingress_self[\"ecs_service_ingress_http_self\"]","mode":"managed","type":"aws_security_group_rule","name":"ingress_self","index":"ecs_service_ingress_http_self","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"cidr_blocks":null,"description":"HTTP access from ALB to ECS Service","from_port":80,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","self":true,"timeouts":null,"to_port":80,"type":"ingress"},"sensitive_values":{}},{"address":"module.sg.aws_security_group_rule.ingress_self[\"ecs_service_ingress_https_self\"]","mode":"managed","type":"aws_security_group_rule","name":"ingress_self","index":"ecs_service_ingress_https_self","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"cidr_blocks":null,"description":"HTTPS access from ALB to ECS Service","from_port":443,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","self":true,"timeouts":null,"to_port":443,"type":"ingress"},"sensitive_values":{}},{"address":"module.sg.aws_security_group_rule.ingress_self[\"rds_ingress_ecs_self\"]","mode":"managed","type":"aws_security_group_rule","name":"ingress_self","index":"rds_ingress_ecs_self","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":2,"values":{"cidr_blocks":null,"description":"Access from ECS to RDS","from_port":1433,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","self":true,"timeouts":null,"to_port":1433,"type":"ingress"},"sensitive_values":{}}],"address":"module.sg"},{"resources":[{"address":"module.vpc.aws_eip.nat_eip","mode":"managed","type":"aws_eip","name":"nat_eip","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"address":null,"associate_with_private_ip":null,"customer_owned_ipv4_pool":null,"tags":{"Name":"DEV-NAT-EIP"},"tags_all":{"Name":"DEV-NAT-EIP"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_internet_gateway.igw","mode":"managed","type":"aws_internet_gateway","name":"igw","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"tags":{"Name":"DEV-IGW"},"tags_all":{"Name":"DEV-IGW"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_nat_gateway.nat","mode":"managed","type":"aws_nat_gateway","name":"nat","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"connectivity_type":"public","secondary_allocation_ids":null,"tags":{"Name":"DEV-NAT-Gateway"},"tags_all":{"Name":"DEV-NAT-Gateway"},"timeouts":null},"sensitive_values":{"secondary_private_ip_addresses":[],"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_route_table.private","mode":"managed","type":"aws_route_table","name":"private","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"","ipv6_cidr_block":"","local_gateway_id":"","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Name":"DEV-Private-RT"},"tags_all":{"Name":"DEV-Private-RT"},"timeouts":null},"sensitive_values":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_route_table.public","mode":"managed","type":"aws_route_table","name":"public","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","ipv6_cidr_block":"","local_gateway_id":"","nat_gateway_id":"","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Name":"DEV-Public-RT"},"tags_all":{"Name":"DEV-Public-RT"},"timeouts":null},"sensitive_values":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_route_table_association.private_assoc[\"0\"]","mode":"managed","type":"aws_route_table_association","name":"private_assoc","index":"0","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":null,"timeouts":null},"sensitive_values":{}},{"address":"module.vpc.aws_route_table_association.private_assoc[\"1\"]","mode":"managed","type":"aws_route_table_association","name":"private_assoc","index":"1","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":null,"timeouts":null},"sensitive_values":{}},{"address":"module.vpc.aws_route_table_association.public_assoc[\"0\"]","mode":"managed","type":"aws_route_table_association","name":"public_assoc","index":"0","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":null,"timeouts":null},"sensitive_values":{}},{"address":"module.vpc.aws_route_table_association.public_assoc[\"1\"]","mode":"managed","type":"aws_route_table_association","name":"public_assoc","index":"1","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":null,"timeouts":null},"sensitive_values":{}},{"address":"module.vpc.aws_subnet.db[\"0\"]","mode":"managed","type":"aws_subnet","name":"db","index":"0","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"ap-northeast-2a","cidr_block":"10.0.5.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Name":"DEV-DB-Subnet-0"},"tags_all":{"Name":"DEV-DB-Subnet-0"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_subnet.db[\"1\"]","mode":"managed","type":"aws_subnet","name":"db","index":"1","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"ap-northeast-2c","cidr_block":"10.0.6.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Name":"DEV-DB-Subnet-1"},"tags_all":{"Name":"DEV-DB-Subnet-1"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_subnet.private[\"0\"]","mode":"managed","type":"aws_subnet","name":"private","index":"0","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"ap-northeast-2a","cidr_block":"10.0.3.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Name":"DEV-Private-Subnet-0"},"tags_all":{"Name":"DEV-Private-Subnet-0"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_subnet.private[\"1\"]","mode":"managed","type":"aws_subnet","name":"private","index":"1","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"ap-northeast-2c","cidr_block":"10.0.4.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Name":"DEV-Private-Subnet-1"},"tags_all":{"Name":"DEV-Private-Subnet-1"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_subnet.public[\"0\"]","mode":"managed","type":"aws_subnet","name":"public","index":"0","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"ap-northeast-2a","cidr_block":"10.0.1.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":true,"outpost_arn":null,"tags":{"Name":"DEV-Public-Subnet-0"},"tags_all":{"Name":"DEV-Public-Subnet-0"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_subnet.public[\"1\"]","mode":"managed","type":"aws_subnet","name":"public","index":"1","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"ap-northeast-2c","cidr_block":"10.0.2.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":true,"outpost_arn":null,"tags":{"Name":"DEV-Public-Subnet-1"},"tags_all":{"Name":"DEV-Public-Subnet-1"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_vpc.main","mode":"managed","type":"aws_vpc","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_generated_ipv6_cidr_block":null,"cidr_block":"10.0.0.0/16","enable_dns_support":true,"instance_tenancy":"default","ipv4_ipam_pool_id":null,"ipv4_netmask_length":null,"ipv6_ipam_pool_id":null,"ipv6_netmask_length":null,"tags":{"Name":"DEV-vpc"},"tags_all":{"Name":"DEV-vpc"}},"sensitive_values":{"tags":{},"tags_all":{}}}],"address":"module.vpc"}]}},"resource_changes":[{"address":"aws_iam_instance_profile.ecs_instance_profile","mode":"managed","type":"aws_iam_instance_profile","name":"ecs_instance_profile","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"name":"ecs-instance-profile","path":"/","role":"ecs-execution-role","tags":null},"after_unknown":{"arn":true,"create_date":true,"id":true,"name_prefix":true,"tags_all":true,"unique_id":true},"before_sensitive":false,"after_sensitive":{"tags_all":{}}}},{"address":"aws_iam_policy.ecs_service_policy","mode":"managed","type":"aws_iam_policy","name":"ecs_service_policy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Policy for ECS services","name":"ecs-service-policy","path":"/","policy":"{\"Statement\":[{\"Action\":[\"elasticloadbalancing:*\",\"ec2:Describe*\",\"cloudwatch:PutMetricData\",\"logs:CreateLogStream\",\"logs:PutLogEvents\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}],\"Version\":\"2012-10-17\"}","tags":null},"after_unknown":{"arn":true,"attachment_count":true,"id":true,"name_prefix":true,"policy_id":true,"tags_all":true},"before_sensitive":false,"after_sensitive":{"tags_all":{}}}},{"address":"aws_iam_policy.ecs_task_execution_policy","mode":"managed","type":"aws_iam_policy","name":"ecs_task_execution_policy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Policy for ECS task execution to pull images and send logs","name":"ecs-task-execution-policy","path":"/","policy":"{\"Statement\":[{\"Action\":[\"ecr:GetDownloadUrlForLayer\",\"ecr:BatchGetImage\",\"ecr:BatchCheckLayerAvailability\"],\"Effect\":\"Allow\",\"Resource\":\"*\"},{\"Action\":[\"logs:CreateLogStream\",\"logs:PutLogEvents\"],\"Effect\":\"Allow\",\"Resource\":\"*\"},{\"Action\":[\"ssm:GetParameters\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}],\"Version\":\"2012-10-17\"}","tags":null},"after_unknown":{"arn":true,"attachment_count":true,"id":true,"name_prefix":true,"policy_id":true,"tags_all":true},"before_sensitive":false,"after_sensitive":{"tags_all":{}}}},{"address":"aws_iam_policy.ecs_task_role_policy","mode":"managed","type":"aws_iam_policy","name":"ecs_task_role_policy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Policy for ECS task role","name":"ecs-task-role-policy","path":"/","policy":"{\"Statement\":[{\"Action\":[\"s3:GetObject\",\"s3:PutObject\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}],\"Version\":\"2012-10-17\"}","tags":null},"after_unknown":{"arn":true,"attachment_count":true,"id":true,"name_prefix":true,"policy_id":true,"tags_all":true},"before_sensitive":false,"after_sensitive":{"tags_all":{}}}},{"address":"aws_iam_role.ecs_execution_role","mode":"managed","type":"aws_iam_role","name":"ecs_execution_role","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ecs-tasks.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"ecs-execution-role","path":"/","permissions_boundary":null,"tags":null},"after_unknown":{"arn":true,"create_date":true,"id":true,"inline_policy":true,"managed_policy_arns":true,"name_prefix":true,"tags_all":true,"unique_id":true},"before_sensitive":false,"after_sensitive":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}}}},{"address":"aws_iam_role.ecs_service_role","mode":"managed","type":"aws_iam_role","name":"ecs_service_role","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ecs.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"ecs-service-role","path":"/","permissions_boundary":null,"tags":null},"after_unknown":{"arn":true,"create_date":true,"id":true,"inline_policy":true,"managed_policy_arns":true,"name_prefix":true,"tags_all":true,"unique_id":true},"before_sensitive":false,"after_sensitive":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}}}},{"address":"aws_iam_role.ecs_task_role","mode":"managed","type":"aws_iam_role","name":"ecs_task_role","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ecs-tasks.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"ecs-task-role","path":"/","permissions_boundary":null,"tags":null},"after_unknown":{"arn":true,"create_date":true,"id":true,"inline_policy":true,"managed_policy_arns":true,"name_prefix":true,"tags_all":true,"unique_id":true},"before_sensitive":false,"after_sensitive":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}}}},{"address":"aws_iam_role_policy_attachment.ecs_execution_role_attach","mode":"managed","type":"aws_iam_role_policy_attachment","name":"ecs_execution_role_attach","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"role":"ecs-execution-role"},"after_unknown":{"id":true,"policy_arn":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_iam_role_policy_attachment.ecs_service_role_attach","mode":"managed","type":"aws_iam_role_policy_attachment","name":"ecs_service_role_attach","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"role":"ecs-service-role"},"after_unknown":{"id":true,"policy_arn":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_iam_role_policy_attachment.ecs_task_role_attach","mode":"managed","type":"aws_iam_role_policy_attachment","name":"ecs_task_role_attach","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"role":"ecs-task-role"},"after_unknown":{"id":true,"policy_arn":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.alb[\"private_alb\"].aws_lb.this","module_address":"module.alb[\"private_alb\"]","mode":"managed","type":"aws_lb","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"access_logs":[],"client_keep_alive":3600,"connection_logs":[],"customer_owned_ipv4_pool":null,"desync_mitigation_mode":"defensive","dns_record_client_routing_policy":null,"drop_invalid_header_fields":false,"enable_cross_zone_load_balancing":null,"enable_deletion_protection":false,"enable_http2":true,"enable_tls_version_and_cipher_suite_headers":false,"enable_waf_fail_open":false,"enable_xff_client_port":false,"idle_timeout":60,"internal":true,"load_balancer_type":"application","name":"dev-private-alb","preserve_host_header":false,"security_groups":["sg-0987654321fedcba"],"tags":{"Environment":"DEV","Name":"dev-private-alb"},"tags_all":{"Environment":"DEV","Name":"dev-private-alb"},"timeouts":null,"xff_header_processing_mode":"append"},"after_unknown":{"access_logs":[],"arn":true,"arn_suffix":true,"connection_logs":[],"dns_name":true,"enforce_security_group_inbound_rules_on_private_link_traffic":true,"id":true,"ip_address_type":true,"name_prefix":true,"security_groups":[false],"subnet_mapping":true,"subnets":true,"tags":{},"tags_all":{},"vpc_id":true,"zone_id":true},"before_sensitive":false,"after_sensitive":{"access_logs":[],"connection_logs":[],"security_groups":[false],"subnet_mapping":[],"subnets":[],"tags":{},"tags_all":{}}}},{"address":"module.alb[\"private_alb\"].aws_lb_listener.listener_http[\"api_tg\"]","module_address":"module.alb[\"private_alb\"]","mode":"managed","type":"aws_lb_listener","name":"listener_http","index":"api_tg","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"alpn_policy":null,"certificate_arn":null,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[],"type":"forward"}],"port":80,"protocol":"HTTP","tags":null,"timeouts":null},"after_unknown":{"arn":true,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"order":true,"redirect":[],"target_group_arn":true}],"id":true,"load_balancer_arn":true,"mutual_authentication":true,"ssl_policy":true,"tags_all":true},"before_sensitive":false,"after_sensitive":{"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[]}],"mutual_authentication":[],"tags_all":{}}}},{"address":"module.alb[\"private_alb\"].aws_lb_listener.listener_https[\"api_tg\"]","module_address":"module.alb[\"private_alb\"]","mode":"managed","type":"aws_lb_listener","name":"listener_https","index":"api_tg","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"alpn_policy":null,"certificate_arn":"arn:aws:acm:ap-northeast-2:512900982215:certificate/9f22d2e2-0fcb-436b-91ab-86047d3911b1","default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[],"type":"forward"}],"port":443,"protocol":"HTTPS","ssl_policy":"ELBSecurityPolicy-2021-08","tags":null,"timeouts":null},"after_unknown":{"arn":true,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"order":true,"redirect":[],"target_group_arn":true}],"id":true,"load_balancer_arn":true,"mutual_authentication":true,"tags_all":true},"before_sensitive":false,"after_sensitive":{"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[]}],"mutual_authentication":[],"tags_all":{}}}},{"address":"module.alb[\"private_alb\"].aws_lb_target_group.tg[\"api_tg\"]","module_address":"module.alb[\"private_alb\"]","mode":"managed","type":"aws_lb_target_group","name":"tg","index":"api_tg","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"deregistration_delay":"300","health_check":[{"enabled":true,"healthy_threshold":2,"interval":30,"matcher":"200-299","path":"/health","port":"traffic-port","protocol":"HTTP","timeout":5,"unhealthy_threshold":2}],"lambda_multi_value_headers_enabled":false,"name":"api-tg","port":80,"protocol":"HTTP","proxy_protocol_v2":false,"slow_start":0,"tags":{"Name":"DEV-api-tg"},"tags_all":{"Name":"DEV-api-tg"},"target_type":"ip"},"after_unknown":{"arn":true,"arn_suffix":true,"connection_termination":true,"health_check":[{}],"id":true,"ip_address_type":true,"load_balancer_arns":true,"load_balancing_algorithm_type":true,"load_balancing_anomaly_mitigation":true,"load_balancing_cross_zone_enabled":true,"name_prefix":true,"preserve_client_ip":true,"protocol_version":true,"stickiness":true,"tags":{},"tags_all":{},"target_failover":true,"target_group_health":true,"target_health_state":true,"vpc_id":true},"before_sensitive":false,"after_sensitive":{"health_check":[{}],"load_balancer_arns":[],"stickiness":[],"tags":{},"tags_all":{},"target_failover":[],"target_group_health":[],"target_health_state":[]}}},{"address":"module.alb[\"private_alb\"].aws_lb_target_group_attachment.tg_attachment[\"api_tg\"]","module_address":"module.alb[\"private_alb\"]","mode":"managed","type":"aws_lb_target_group_attachment","name":"tg_attachment","index":"api_tg","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"availability_zone":null,"port":80,"target_id":"192.168.1.10"},"after_unknown":{"id":true,"target_group_arn":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.alb[\"public_alb\"].aws_lb.this","module_address":"module.alb[\"public_alb\"]","mode":"managed","type":"aws_lb","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"access_logs":[],"client_keep_alive":3600,"connection_logs":[],"customer_owned_ipv4_pool":null,"desync_mitigation_mode":"defensive","dns_record_client_routing_policy":null,"drop_invalid_header_fields":false,"enable_cross_zone_load_balancing":null,"enable_deletion_protection":false,"enable_http2":true,"enable_tls_version_and_cipher_suite_headers":false,"enable_waf_fail_open":false,"enable_xff_client_port":false,"idle_timeout":60,"internal":false,"load_balancer_type":"application","name":"dev-public-alb","preserve_host_header":false,"security_groups":["sg-0123456789abcdef0"],"tags":{"Environment":"DEV","Name":"dev-public-alb"},"tags_all":{"Environment":"DEV","Name":"dev-public-alb"},"timeouts":null,"xff_header_processing_mode":"append"},"after_unknown":{"access_logs":[],"arn":true,"arn_suffix":true,"connection_logs":[],"dns_name":true,"enforce_security_group_inbound_rules_on_private_link_traffic":true,"id":true,"ip_address_type":true,"name_prefix":true,"security_groups":[false],"subnet_mapping":true,"subnets":true,"tags":{},"tags_all":{},"vpc_id":true,"zone_id":true},"before_sensitive":false,"after_sensitive":{"access_logs":[],"connection_logs":[],"security_groups":[false],"subnet_mapping":[],"subnets":[],"tags":{},"tags_all":{}}}},{"address":"module.alb[\"public_alb\"].aws_lb_listener.listener_http[\"api_tg\"]","module_address":"module.alb[\"public_alb\"]","mode":"managed","type":"aws_lb_listener","name":"listener_http","index":"api_tg","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"alpn_policy":null,"certificate_arn":null,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[{"host":"#{host}","path":"/#{path}","port":"443","protocol":"HTTPS","query":"#{query}","status_code":"HTTP_301"}],"type":"redirect"}],"port":80,"protocol":"HTTP","tags":null,"timeouts":null},"after_unknown":{"arn":true,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"order":true,"redirect":[{}],"target_group_arn":true}],"id":true,"load_balancer_arn":true,"mutual_authentication":true,"ssl_policy":true,"tags_all":true},"before_sensitive":false,"after_sensitive":{"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[{}]}],"mutual_authentication":[],"tags_all":{}}}},{"address":"module.alb[\"public_alb\"].aws_lb_listener.listener_https[\"api_tg\"]","module_address":"module.alb[\"public_alb\"]","mode":"managed","type":"aws_lb_listener","name":"listener_https","index":"api_tg","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"alpn_policy":null,"certificate_arn":"arn:aws:acm:ap-northeast-2:512900982215:certificate/9f22d2e2-0fcb-436b-91ab-86047d3911b1","default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[],"type":"forward"}],"port":443,"protocol":"HTTPS","ssl_policy":"ELBSecurityPolicy-2021-08","tags":null,"timeouts":null},"after_unknown":{"arn":true,"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"order":true,"redirect":[],"target_group_arn":true}],"id":true,"load_balancer_arn":true,"mutual_authentication":true,"tags_all":true},"before_sensitive":false,"after_sensitive":{"default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"forward":[],"redirect":[]}],"mutual_authentication":[],"tags_all":{}}}},{"address":"module.alb[\"public_alb\"].aws_lb_target_group.tg[\"api_tg\"]","module_address":"module.alb[\"public_alb\"]","mode":"managed","type":"aws_lb_target_group","name":"tg","index":"api_tg","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"deregistration_delay":"300","health_check":[{"enabled":true,"healthy_threshold":2,"interval":30,"matcher":"200-299","path":"/health","port":"traffic-port","protocol":"HTTP","timeout":5,"unhealthy_threshold":2}],"lambda_multi_value_headers_enabled":false,"name":"api-tg","port":80,"protocol":"HTTP","proxy_protocol_v2":false,"slow_start":0,"tags":{"Name":"DEV-api-tg"},"tags_all":{"Name":"DEV-api-tg"},"target_type":"ip"},"after_unknown":{"arn":true,"arn_suffix":true,"connection_termination":true,"health_check":[{}],"id":true,"ip_address_type":true,"load_balancer_arns":true,"load_balancing_algorithm_type":true,"load_balancing_anomaly_mitigation":true,"load_balancing_cross_zone_enabled":true,"name_prefix":true,"preserve_client_ip":true,"protocol_version":true,"stickiness":true,"tags":{},"tags_all":{},"target_failover":true,"target_group_health":true,"target_health_state":true,"vpc_id":true},"before_sensitive":false,"after_sensitive":{"health_check":[{}],"load_balancer_arns":[],"stickiness":[],"tags":{},"tags_all":{},"target_failover":[],"target_group_health":[],"target_health_state":[]}}},{"address":"module.alb[\"public_alb\"].aws_lb_target_group_attachment.tg_attachment[\"api_tg\"]","module_address":"module.alb[\"public_alb\"]","mode":"managed","type":"aws_lb_target_group_attachment","name":"tg_attachment","index":"api_tg","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"availability_zone":null,"port":80,"target_id":"i-0123456789abcdef0"},"after_unknown":{"id":true,"target_group_arn":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.ecs.aws_autoscaling_group.ecs","module_address":"module.ecs","mode":"managed","type":"aws_autoscaling_group","name":"ecs","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"capacity_rebalance":null,"context":null,"default_instance_warmup":null,"desired_capacity":2,"desired_capacity_type":null,"enabled_metrics":null,"force_delete":false,"force_delete_warm_pool":false,"health_check_grace_period":300,"ignore_failed_scaling_activities":false,"initial_lifecycle_hook":[],"instance_maintenance_policy":[],"instance_refresh":[],"launch_configuration":null,"launch_template":[{"version":"$Latest"}],"max_instance_lifetime":null,"max_size":4,"metrics_granularity":"1Minute","min_elb_capacity":null,"min_size":1,"placement_group":null,"protect_from_scale_in":false,"suspended_processes":null,"tag":[{"key":"Name","propagate_at_launch":true,"value":"ecs-instance"}],"termination_policies":null,"timeouts":null,"wait_for_capacity_timeout":"10m","wait_for_elb_capacity":null,"warm_pool":[]},"after_unknown":{"arn":true,"availability_zones":true,"default_cooldown":true,"health_check_type":true,"id":true,"initial_lifecycle_hook":[],"instance_maintenance_policy":[],"instance_refresh":[],"launch_template":[{"id":true,"name":true}],"load_balancers":true,"mixed_instances_policy":true,"name":true,"name_prefix":true,"predicted_capacity":true,"service_linked_role_arn":true,"tag":[{}],"target_group_arns":true,"traffic_source":true,"vpc_zone_identifier":true,"warm_pool":[],"warm_pool_size":true},"before_sensitive":false,"after_sensitive":{"availability_zones":[],"initial_lifecycle_hook":[],"instance_maintenance_policy":[],"instance_refresh":[],"launch_template":[{}],"load_balancers":[],"mixed_instances_policy":[],"tag":[{}],"target_group_arns":[],"traffic_source":[],"vpc_zone_identifier":[],"warm_pool":[]}}},{"address":"module.ecs.aws_ecs_cluster.this[\"main\"]","module_address":"module.ecs","mode":"managed","type":"aws_ecs_cluster","name":"this","index":"main","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"configuration":[],"name":"dev-ecs-cluster","service_connect_defaults":[],"tags":null},"after_unknown":{"arn":true,"configuration":[],"id":true,"service_connect_defaults":[],"setting":true,"tags_all":true},"before_sensitive":false,"after_sensitive":{"configuration":[],"service_connect_defaults":[],"setting":[],"tags_all":{}}}},{"address":"module.ecs.aws_ecs_service.this[\"api_service\"]","module_address":"module.ecs","mode":"managed","type":"aws_ecs_service","name":"this","index":"api_service","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"alarms":[],"capacity_provider_strategy":[],"deployment_circuit_breaker":[],"deployment_controller":[],"deployment_maximum_percent":200,"deployment_minimum_healthy_percent":100,"desired_count":2,"enable_ecs_managed_tags":false,"enable_execute_command":false,"force_delete":null,"force_new_deployment":null,"health_check_grace_period_seconds":null,"launch_type":"EC2","load_balancer":[{"container_name":"api-server","container_port":80,"elb_name":"","target_group_arn":""}],"name":"api-service","network_configuration":[{"assign_public_ip":false}],"ordered_placement_strategy":[],"placement_constraints":[],"propagate_tags":null,"scheduling_strategy":"REPLICA","service_connect_configuration":[],"service_registries":[],"tags":null,"timeouts":null,"volume_configuration":[],"wait_for_steady_state":false},"after_unknown":{"alarms":[],"capacity_provider_strategy":[],"cluster":true,"deployment_circuit_breaker":[],"deployment_controller":[],"iam_role":true,"id":true,"load_balancer":[{}],"network_configuration":[{"security_groups":true,"subnets":true}],"ordered_placement_strategy":[],"placement_constraints":[],"platform_version":true,"service_connect_configuration":[],"service_registries":[],"tags_all":true,"task_definition":true,"triggers":true,"volume_configuration":[]},"before_sensitive":false,"after_sensitive":{"alarms":[],"capacity_provider_strategy":[],"deployment_circuit_breaker":[],"deployment_controller":[],"load_balancer":[{}],"network_configuration":[{"security_groups":[],"subnets":[]}],"ordered_placement_strategy":[],"placement_constraints":[],"service_connect_configuration":[],"service_registries":[],"tags_all":{},"triggers":{},"volume_configuration":[]}}},{"address":"module.ecs.aws_ecs_task_definition.this[\"api_server\"]","module_address":"module.ecs","mode":"managed","type":"aws_ecs_task_definition","name":"this","index":"api_server","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"container_definitions":"[{\"cpu\":256,\"environment\":[{\"name\":\"ENV\",\"value\":\"DEV\"}],\"essential\":true,\"image\":\"nginx:latest\",\"logConfiguration\":{\"logDriver\":\"awslogs\",\"options\":{\"awslogs-group\":\"/ecs/api-server\",\"awslogs-region\":\"ap-northeast-2\",\"awslogs-stream-prefix\":\"api\"}},\"memory\":512,\"name\":\"api-server\",\"portMappings\":[]}]","cpu":"512","ephemeral_storage":[],"family":"dev-api-server","inference_accelerator":[],"ipc_mode":null,"memory":"1024","network_mode":"bridge","pid_mode":null,"placement_constraints":[],"proxy_configuration":[],"requires_compatibilities":["EC2"],"runtime_platform":[],"skip_destroy":false,"tags":null,"track_latest":false,"volume":[]},"after_unknown":{"arn":true,"arn_without_revision":true,"ephemeral_storage":[],"execution_role_arn":true,"id":true,"inference_accelerator":[],"placement_constraints":[],"proxy_configuration":[],"requires_compatibilities":[false],"revision":true,"runtime_platform":[],"tags_all":true,"task_role_arn":true,"volume":[]},"before_sensitive":false,"after_sensitive":{"ephemeral_storage":[],"inference_accelerator":[],"placement_constraints":[],"proxy_configuration":[],"requires_compatibilities":[false],"runtime_platform":[],"tags_all":{},"volume":[]}}},{"address":"module.ecs.aws_launch_template.ecs","module_address":"module.ecs","mode":"managed","type":"aws_launch_template","name":"ecs","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"block_device_mappings":[],"capacity_reservation_specification":[],"cpu_options":[],"credit_specification":[],"description":null,"disable_api_stop":null,"disable_api_termination":null,"ebs_optimized":null,"elastic_gpu_specifications":[],"elastic_inference_accelerator":[],"enclave_options":[],"hibernation_options":[],"iam_instance_profile":[{"arn":null,"name":"ecs-instance-profile"}],"image_id":"amzn2-ami-ecs-hvm-2.0.20211202-x86_64-ebs","instance_initiated_shutdown_behavior":null,"instance_market_options":[],"instance_requirements":[],"instance_type":"t3.micro","kernel_id":null,"key_name":null,"license_specification":[],"maintenance_options":[],"monitoring":[],"name_prefix":"ecs-launch-template-","network_interfaces":[],"placement":[],"private_dns_name_options":[],"ram_disk_id":null,"security_group_names":null,"tag_specifications":[{"resource_type":"instance","tags":{"Name":"ecs-instance"}}],"tags":null,"update_default_version":null,"user_data":"ICAjIS9iaW4vYmFzaAogIGVjaG8gRUNTX0NMVVNURVI9ZGV2LWVjcy1jbHVzdGVyID4+IC9ldGMvZWNzL2Vjcy5jb25maWcK"},"after_unknown":{"arn":true,"block_device_mappings":[],"capacity_reservation_specification":[],"cpu_options":[],"credit_specification":[],"default_version":true,"elastic_gpu_specifications":[],"elastic_inference_accelerator":[],"enclave_options":[],"hibernation_options":[],"iam_instance_profile":[{}],"id":true,"instance_market_options":[],"instance_requirements":[],"latest_version":true,"license_specification":[],"maintenance_options":[],"metadata_options":true,"monitoring":[],"name":true,"network_interfaces":[],"placement":[],"private_dns_name_options":[],"tag_specifications":[{"tags":{}}],"tags_all":true,"vpc_security_group_ids":true},"before_sensitive":false,"after_sensitive":{"block_device_mappings":[],"capacity_reservation_specification":[],"cpu_options":[],"credit_specification":[],"elastic_gpu_specifications":[],"elastic_inference_accelerator":[],"enclave_options":[],"hibernation_options":[],"iam_instance_profile":[{}],"instance_market_options":[],"instance_requirements":[],"license_specification":[],"maintenance_options":[],"metadata_options":[],"monitoring":[],"network_interfaces":[],"placement":[],"private_dns_name_options":[],"tag_specifications":[{"tags":{}}],"tags_all":{},"vpc_security_group_ids":[]}}},{"address":"module.rds.aws_db_instance.rds","module_address":"module.rds","mode":"managed","type":"aws_db_instance","name":"rds","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"allocated_storage":20,"allow_major_version_upgrade":null,"apply_immediately":false,"auto_minor_version_upgrade":true,"blue_green_update":[],"copy_tags_to_snapshot":false,"custom_iam_instance_profile":null,"customer_owned_ip_enabled":null,"db_name":"mydatabase","db_subnet_group_name":"dev-db-subnet-group","dedicated_log_volume":false,"delete_automated_backups":true,"deletion_protection":null,"domain":null,"domain_auth_secret_arn":null,"domain_dns_ips":null,"domain_iam_role_name":null,"domain_ou":null,"enabled_cloudwatch_logs_exports":null,"engine":"mysql","engine_version":"8.0","final_snapshot_identifier":null,"iam_database_authentication_enabled":null,"identifier":"rds-dev-mydatabase","instance_class":"db.t3.medium","manage_master_user_password":null,"max_allocated_storage":null,"monitoring_interval":0,"multi_az":false,"parameter_group_name":"default.mysql8.0","password":"securepassword","performance_insights_enabled":false,"publicly_accessible":false,"replicate_source_db":null,"restore_to_point_in_time":[],"s3_import":[],"skip_final_snapshot":true,"storage_encrypted":null,"storage_type":"gp2","tags":{"Environment":"dev","Name":"mydatabase"},"tags_all":{"Environment":"dev","Name":"mydatabase"},"timeouts":null,"upgrade_storage_config":null,"username":"admin"},"after_unknown":{"address":true,"arn":true,"availability_zone":true,"backup_retention_period":true,"backup_target":true,"backup_window":true,"blue_green_update":[],"ca_cert_identifier":true,"character_set_name":true,"domain_fqdn":true,"endpoint":true,"engine_lifecycle_support":true,"engine_version_actual":true,"hosted_zone_id":true,"id":true,"identifier_prefix":true,"iops":true,"kms_key_id":true,"latest_restorable_time":true,"license_model":true,"listener_endpoint":true,"maintenance_window":true,"master_user_secret":true,"master_user_secret_kms_key_id":true,"monitoring_role_arn":true,"nchar_character_set_name":true,"network_type":true,"option_group_name":true,"performance_insights_kms_key_id":true,"performance_insights_retention_period":true,"port":true,"replica_mode":true,"replicas":true,"resource_id":true,"restore_to_point_in_time":[],"s3_import":[],"snapshot_identifier":true,"status":true,"storage_throughput":true,"tags":{},"tags_all":{},"timezone":true,"vpc_security_group_ids":true},"before_sensitive":false,"after_sensitive":{"blue_green_update":[],"listener_endpoint":[],"master_user_secret":[],"password":true,"replicas":[],"restore_to_point_in_time":[],"s3_import":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[]}}},{"address":"module.rds.aws_db_subnet_group.db_subnet_group","module_address":"module.rds","mode":"managed","type":"aws_db_subnet_group","name":"db_subnet_group","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Managed by Terraform","name":"dev-db-subnet-group","tags":{"Environment":"dev","Name":"dev-db-subnet-group"},"tags_all":{"Environment":"dev","Name":"dev-db-subnet-group"}},"after_unknown":{"arn":true,"id":true,"name_prefix":true,"subnet_ids":true,"supported_network_types":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"subnet_ids":[],"supported_network_types":[],"tags":{},"tags_all":{}}}},{"address":"module.sg.aws_security_group.sg[\"alb_sg\"]","module_address":"module.sg","mode":"managed","type":"aws_security_group","name":"sg","index":"alb_sg","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Security group for ALB","name":"alb-sg","revoke_rules_on_delete":false,"tags":{"Name":"alb-sg"},"tags_all":{"Name":"alb-sg"},"timeouts":null},"after_unknown":{"arn":true,"egress":true,"id":true,"ingress":true,"name_prefix":true,"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"egress":[],"ingress":[],"tags":{},"tags_all":{}}}},{"address":"module.sg.aws_security_group.sg[\"ecs_instance_sg\"]","module_address":"module.sg","mode":"managed","type":"aws_security_group","name":"sg","index":"ecs_instance_sg","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Security group for ECS Instances","name":"ecs-instance-sg","revoke_rules_on_delete":false,"tags":{"Name":"ecs-instance-sg"},"tags_all":{"Name":"ecs-instance-sg"},"timeouts":null},"after_unknown":{"arn":true,"egress":true,"id":true,"ingress":true,"name_prefix":true,"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"egress":[],"ingress":[],"tags":{},"tags_all":{}}}},{"address":"module.sg.aws_security_group.sg[\"ecs_sg\"]","module_address":"module.sg","mode":"managed","type":"aws_security_group","name":"sg","index":"ecs_sg","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Security group for ECS","name":"ecs-sg","revoke_rules_on_delete":false,"tags":{"Name":"ecs-sg"},"tags_all":{"Name":"ecs-sg"},"timeouts":null},"after_unknown":{"arn":true,"egress":true,"id":true,"ingress":true,"name_prefix":true,"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"egress":[],"ingress":[],"tags":{},"tags_all":{}}}},{"address":"module.sg.aws_security_group.sg[\"rds_sg\"]","module_address":"module.sg","mode":"managed","type":"aws_security_group","name":"sg","index":"rds_sg","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Security group for RDS","name":"rds-sg","revoke_rules_on_delete":false,"tags":{"Name":"rds-sg"},"tags_all":{"Name":"rds-sg"},"timeouts":null},"after_unknown":{"arn":true,"egress":true,"id":true,"ingress":true,"name_prefix":true,"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"egress":[],"ingress":[],"tags":{},"tags_all":{}}}},{"address":"module.sg.aws_security_group_rule.egress[\"alb_egress_all\"]","module_address":"module.sg","mode":"managed","type":"aws_security_group_rule","name":"egress","index":"alb_egress_all","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"cidr_blocks":["0.0.0.0/0"],"description":"Allow all egress from ALB","from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","self":false,"timeouts":null,"to_port":0,"type":"egress"},"after_unknown":{"cidr_blocks":[false],"id":true,"security_group_id":true,"security_group_rule_id":true,"source_security_group_id":true},"before_sensitive":false,"after_sensitive":{"cidr_blocks":[false]}}},{"address":"module.sg.aws_security_group_rule.egress[\"ecs_egress_all\"]","module_address":"module.sg","mode":"managed","type":"aws_security_group_rule","name":"egress","index":"ecs_egress_all","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"cidr_blocks":["0.0.0.0/0"],"description":"Allow all egress from ECS Instance","from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","self":false,"timeouts":null,"to_port":0,"type":"egress"},"after_unknown":{"cidr_blocks":[false],"id":true,"security_group_id":true,"security_group_rule_id":true,"source_security_group_id":true},"before_sensitive":false,"after_sensitive":{"cidr_blocks":[false]}}},{"address":"module.sg.aws_security_group_rule.egress[\"ecs_service_egress_all\"]","module_address":"module.sg","mode":"managed","type":"aws_security_group_rule","name":"egress","index":"ecs_service_egress_all","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"cidr_blocks":["0.0.0.0/0"],"description":"Allow all egress from ECS Service","from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","self":false,"timeouts":null,"to_port":0,"type":"egress"},"after_unknown":{"cidr_blocks":[false],"id":true,"security_group_id":true,"security_group_rule_id":true,"source_security_group_id":true},"before_sensitive":false,"after_sensitive":{"cidr_blocks":[false]}}},{"address":"module.sg.aws_security_group_rule.egress[\"rds_egress_all\"]","module_address":"module.sg","mode":"managed","type":"aws_security_group_rule","name":"egress","index":"rds_egress_all","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"cidr_blocks":["0.0.0.0/0"],"description":"Allow all egress from RDS","from_port":0,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"-1","self":false,"timeouts":null,"to_port":0,"type":"egress"},"after_unknown":{"cidr_blocks":[false],"id":true,"security_group_id":true,"security_group_rule_id":true,"source_security_group_id":true},"before_sensitive":false,"after_sensitive":{"cidr_blocks":[false]}}},{"address":"module.sg.aws_security_group_rule.ingress_cidr[\"alb_ingress_http_cidr\"]","module_address":"module.sg","mode":"managed","type":"aws_security_group_rule","name":"ingress_cidr","index":"alb_ingress_http_cidr","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"cidr_blocks":["59.5.15.55/32","10.212.134.0/24"],"description":"HTTP access to ALB","from_port":80,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","self":false,"timeouts":null,"to_port":80,"type":"ingress"},"after_unknown":{"cidr_blocks":[false,false],"id":true,"security_group_id":true,"security_group_rule_id":true,"source_security_group_id":true},"before_sensitive":false,"after_sensitive":{"cidr_blocks":[false,false]}}},{"address":"module.sg.aws_security_group_rule.ingress_cidr[\"alb_ingress_https_cidr\"]","module_address":"module.sg","mode":"managed","type":"aws_security_group_rule","name":"ingress_cidr","index":"alb_ingress_https_cidr","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"cidr_blocks":["59.5.15.55/32","10.212.134.0/24"],"description":"HTTPS access to ALB","from_port":443,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","self":false,"timeouts":null,"to_port":443,"type":"ingress"},"after_unknown":{"cidr_blocks":[false,false],"id":true,"security_group_id":true,"security_group_rule_id":true,"source_security_group_id":true},"before_sensitive":false,"after_sensitive":{"cidr_blocks":[false,false]}}},{"address":"module.sg.aws_security_group_rule.ingress_self[\"ecs_instance_ingress_ssh_self\"]","module_address":"module.sg","mode":"managed","type":"aws_security_group_rule","name":"ingress_self","index":"ecs_instance_ingress_ssh_self","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"cidr_blocks":null,"description":"SSH access to ECS Instance","from_port":22,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","self":true,"timeouts":null,"to_port":22,"type":"ingress"},"after_unknown":{"id":true,"security_group_id":true,"security_group_rule_id":true,"source_security_group_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.sg.aws_security_group_rule.ingress_self[\"ecs_service_ingress_http_self\"]","module_address":"module.sg","mode":"managed","type":"aws_security_group_rule","name":"ingress_self","index":"ecs_service_ingress_http_self","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"cidr_blocks":null,"description":"HTTP access from ALB to ECS Service","from_port":80,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","self":true,"timeouts":null,"to_port":80,"type":"ingress"},"after_unknown":{"id":true,"security_group_id":true,"security_group_rule_id":true,"source_security_group_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.sg.aws_security_group_rule.ingress_self[\"ecs_service_ingress_https_self\"]","module_address":"module.sg","mode":"managed","type":"aws_security_group_rule","name":"ingress_self","index":"ecs_service_ingress_https_self","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"cidr_blocks":null,"description":"HTTPS access from ALB to ECS Service","from_port":443,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","self":true,"timeouts":null,"to_port":443,"type":"ingress"},"after_unknown":{"id":true,"security_group_id":true,"security_group_rule_id":true,"source_security_group_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.sg.aws_security_group_rule.ingress_self[\"rds_ingress_ecs_self\"]","module_address":"module.sg","mode":"managed","type":"aws_security_group_rule","name":"ingress_self","index":"rds_ingress_ecs_self","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"cidr_blocks":null,"description":"Access from ECS to RDS","from_port":1433,"ipv6_cidr_blocks":null,"prefix_list_ids":null,"protocol":"tcp","self":true,"timeouts":null,"to_port":1433,"type":"ingress"},"after_unknown":{"id":true,"security_group_id":true,"security_group_rule_id":true,"source_security_group_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.vpc.aws_eip.nat_eip","module_address":"module.vpc","mode":"managed","type":"aws_eip","name":"nat_eip","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"address":null,"associate_with_private_ip":null,"customer_owned_ipv4_pool":null,"tags":{"Name":"DEV-NAT-EIP"},"tags_all":{"Name":"DEV-NAT-EIP"},"timeouts":null},"after_unknown":{"allocation_id":true,"arn":true,"association_id":true,"carrier_ip":true,"customer_owned_ip":true,"domain":true,"id":true,"instance":true,"network_border_group":true,"network_interface":true,"private_dns":true,"private_ip":true,"ptr_record":true,"public_dns":true,"public_ip":true,"public_ipv4_pool":true,"tags":{},"tags_all":{},"vpc":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_internet_gateway.igw","module_address":"module.vpc","mode":"managed","type":"aws_internet_gateway","name":"igw","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"tags":{"Name":"DEV-IGW"},"tags_all":{"Name":"DEV-IGW"},"timeouts":null},"after_unknown":{"arn":true,"id":true,"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_nat_gateway.nat","module_address":"module.vpc","mode":"managed","type":"aws_nat_gateway","name":"nat","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"connectivity_type":"public","secondary_allocation_ids":null,"tags":{"Name":"DEV-NAT-Gateway"},"tags_all":{"Name":"DEV-NAT-Gateway"},"timeouts":null},"after_unknown":{"allocation_id":true,"association_id":true,"id":true,"network_interface_id":true,"private_ip":true,"public_ip":true,"secondary_private_ip_address_count":true,"secondary_private_ip_addresses":true,"subnet_id":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"secondary_private_ip_addresses":[],"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_route_table.private","module_address":"module.vpc","mode":"managed","type":"aws_route_table","name":"private","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","gateway_id":"","ipv6_cidr_block":"","local_gateway_id":"","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Name":"DEV-Private-RT"},"tags_all":{"Name":"DEV-Private-RT"},"timeouts":null},"after_unknown":{"arn":true,"id":true,"owner_id":true,"propagating_vgws":true,"route":[{"nat_gateway_id":true}],"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_route_table.public","module_address":"module.vpc","mode":"managed","type":"aws_route_table","name":"public","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","ipv6_cidr_block":"","local_gateway_id":"","nat_gateway_id":"","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Name":"DEV-Public-RT"},"tags_all":{"Name":"DEV-Public-RT"},"timeouts":null},"after_unknown":{"arn":true,"id":true,"owner_id":true,"propagating_vgws":true,"route":[{"gateway_id":true}],"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_route_table_association.private_assoc[\"0\"]","module_address":"module.vpc","mode":"managed","type":"aws_route_table_association","name":"private_assoc","index":"0","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null,"timeouts":null},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.vpc.aws_route_table_association.private_assoc[\"1\"]","module_address":"module.vpc","mode":"managed","type":"aws_route_table_association","name":"private_assoc","index":"1","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null,"timeouts":null},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.vpc.aws_route_table_association.public_assoc[\"0\"]","module_address":"module.vpc","mode":"managed","type":"aws_route_table_association","name":"public_assoc","index":"0","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null,"timeouts":null},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.vpc.aws_route_table_association.public_assoc[\"1\"]","module_address":"module.vpc","mode":"managed","type":"aws_route_table_association","name":"public_assoc","index":"1","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null,"timeouts":null},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.vpc.aws_subnet.db[\"0\"]","module_address":"module.vpc","mode":"managed","type":"aws_subnet","name":"db","index":"0","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"ap-northeast-2a","cidr_block":"10.0.5.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Name":"DEV-DB-Subnet-0"},"tags_all":{"Name":"DEV-DB-Subnet-0"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"private_dns_hostname_type_on_launch":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_subnet.db[\"1\"]","module_address":"module.vpc","mode":"managed","type":"aws_subnet","name":"db","index":"1","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"ap-northeast-2c","cidr_block":"10.0.6.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Name":"DEV-DB-Subnet-1"},"tags_all":{"Name":"DEV-DB-Subnet-1"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"private_dns_hostname_type_on_launch":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_subnet.private[\"0\"]","module_address":"module.vpc","mode":"managed","type":"aws_subnet","name":"private","index":"0","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"ap-northeast-2a","cidr_block":"10.0.3.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Name":"DEV-Private-Subnet-0"},"tags_all":{"Name":"DEV-Private-Subnet-0"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"private_dns_hostname_type_on_launch":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_subnet.private[\"1\"]","module_address":"module.vpc","mode":"managed","type":"aws_subnet","name":"private","index":"1","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"ap-northeast-2c","cidr_block":"10.0.4.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Name":"DEV-Private-Subnet-1"},"tags_all":{"Name":"DEV-Private-Subnet-1"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"private_dns_hostname_type_on_launch":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_subnet.public[\"0\"]","module_address":"module.vpc","mode":"managed","type":"aws_subnet","name":"public","index":"0","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"ap-northeast-2a","cidr_block":"10.0.1.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":true,"outpost_arn":null,"tags":{"Name":"DEV-Public-Subnet-0"},"tags_all":{"Name":"DEV-Public-Subnet-0"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"private_dns_hostname_type_on_launch":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_subnet.public[\"1\"]","module_address":"module.vpc","mode":"managed","type":"aws_subnet","name":"public","index":"1","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"ap-northeast-2c","cidr_block":"10.0.2.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":true,"outpost_arn":null,"tags":{"Name":"DEV-Public-Subnet-1"},"tags_all":{"Name":"DEV-Public-Subnet-1"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"private_dns_hostname_type_on_launch":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_vpc.main","module_address":"module.vpc","mode":"managed","type":"aws_vpc","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_generated_ipv6_cidr_block":null,"cidr_block":"10.0.0.0/16","enable_dns_support":true,"instance_tenancy":"default","ipv4_ipam_pool_id":null,"ipv4_netmask_length":null,"ipv6_ipam_pool_id":null,"ipv6_netmask_length":null,"tags":{"Name":"DEV-vpc"},"tags_all":{"Name":"DEV-vpc"}},"after_unknown":{"arn":true,"default_network_acl_id":true,"default_route_table_id":true,"default_security_group_id":true,"dhcp_options_id":true,"enable_dns_hostnames":true,"enable_network_address_usage_metrics":true,"id":true,"ipv6_association_id":true,"ipv6_cidr_block":true,"ipv6_cidr_block_network_border_group":true,"main_route_table_id":true,"owner_id":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}}],"configuration":{"provider_config":{"aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"~\u003e 5.0","expressions":{"region":{"constant_value":"ap-northeast-2"}}}},"root_module":{"resources":[{"address":"aws_iam_instance_profile.ecs_instance_profile","mode":"managed","type":"aws_iam_instance_profile","name":"ecs_instance_profile","provider_config_key":"aws","expressions":{"name":{"constant_value":"ecs-instance-profile"},"role":{"references":["aws_iam_role.ecs_execution_role.name","aws_iam_role.ecs_execution_role"]}},"schema_version":0},{"address":"aws_iam_policy.ecs_service_policy","mode":"managed","type":"aws_iam_policy","name":"ecs_service_policy","provider_config_key":"aws","expressions":{"description":{"constant_value":"Policy for ECS services"},"name":{"constant_value":"ecs-service-policy"},"policy":{}},"schema_version":0},{"address":"aws_iam_policy.ecs_task_execution_policy","mode":"managed","type":"aws_iam_policy","name":"ecs_task_execution_policy","provider_config_key":"aws","expressions":{"description":{"constant_value":"Policy for ECS task execution to pull images and send logs"},"name":{"constant_value":"ecs-task-execution-policy"},"policy":{}},"schema_version":0},{"address":"aws_iam_policy.ecs_task_role_policy","mode":"managed","type":"aws_iam_policy","name":"ecs_task_role_policy","provider_config_key":"aws","expressions":{"description":{"constant_value":"Policy for ECS task role"},"name":{"constant_value":"ecs-task-role-policy"},"policy":{}},"schema_version":0},{"address":"aws_iam_role.ecs_execution_role","mode":"managed","type":"aws_iam_role","name":"ecs_execution_role","provider_config_key":"aws","expressions":{"assume_role_policy":{},"name":{"constant_value":"ecs-execution-role"}},"schema_version":0},{"address":"aws_iam_role.ecs_service_role","mode":"managed","type":"aws_iam_role","name":"ecs_service_role","provider_config_key":"aws","expressions":{"assume_role_policy":{},"name":{"constant_value":"ecs-service-role"}},"schema_version":0},{"address":"aws_iam_role.ecs_task_role","mode":"managed","type":"aws_iam_role","name":"ecs_task_role","provider_config_key":"aws","expressions":{"assume_role_policy":{},"name":{"constant_value":"ecs-task-role"}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.ecs_execution_role_attach","mode":"managed","type":"aws_iam_role_policy_attachment","name":"ecs_execution_role_attach","provider_config_key":"aws","expressions":{"policy_arn":{"references":["aws_iam_policy.ecs_task_execution_policy.arn","aws_iam_policy.ecs_task_execution_policy"]},"role":{"references":["aws_iam_role.ecs_execution_role.name","aws_iam_role.ecs_execution_role"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.ecs_service_role_attach","mode":"managed","type":"aws_iam_role_policy_attachment","name":"ecs_service_role_attach","provider_config_key":"aws","expressions":{"policy_arn":{"references":["aws_iam_policy.ecs_service_policy.arn","aws_iam_policy.ecs_service_policy"]},"role":{"references":["aws_iam_role.ecs_service_role.name","aws_iam_role.ecs_service_role"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.ecs_task_role_attach","mode":"managed","type":"aws_iam_role_policy_attachment","name":"ecs_task_role_attach","provider_config_key":"aws","expressions":{"policy_arn":{"references":["aws_iam_policy.ecs_task_role_policy.arn","aws_iam_policy.ecs_task_role_policy"]},"role":{"references":["aws_iam_role.ecs_task_role.name","aws_iam_role.ecs_task_role"]}},"schema_version":0}],"module_calls":{"alb":{"source":"../../modules/alb","expressions":{"alb_idle_timeout":{"references":["each.value.alb_idle_timeout","each.value"]},"alb_internal":{"references":["each.value.alb_internal","each.value"]},"alb_name":{"references":["each.value.alb_name","each.value"]},"alb_security_groups":{"references":["each.value.alb_security_groups","each.value"]},"alb_subnets":{"references":["module.vpc.public_subnet_ids","module.vpc"]},"alb_type":{"references":["each.value.alb_type","each.value"]},"default_http_action_type":{"references":["each.value.default_http_action_type","each.value"]},"default_https_action_type":{"references":["each.value.default_https_action_type","each.value"]},"environment":{"references":["var.environment"]},"health_check_healthy_threshold":{"references":["each.value.health_check_healthy_threshold","each.value"]},"health_check_interval":{"references":["each.value.health_check_interval","each.value"]},"health_check_matcher":{"references":["each.value.health_check_matcher","each.value"]},"health_check_path":{"references":["each.value.health_check_path","each.value"]},"health_check_timeout":{"references":["each.value.health_check_timeout","each.value"]},"health_check_unhealthy_threshold":{"references":["each.value.health_check_unhealthy_threshold","each.value"]},"listener_http_port":{"references":["each.value.listener_http_port","each.value"]},"listener_http_protocol":{"references":["each.value.listener_http_protocol","each.value"]},"listener_https_port":{"references":["each.value.listener_https_port","each.value"]},"listener_https_protocol":{"references":["each.value.listener_https_protocol","each.value"]},"redirect_http_port":{"references":["each.value.redirect_http_port","each.value"]},"redirect_http_protocol":{"references":["each.value.redirect_http_protocol","each.value"]},"redirect_http_status_code":{"references":["each.value.redirect_http_status_code","each.value"]},"ssl_certificate_arn":{"references":["each.value.ssl_certificate_arn","each.value"]},"ssl_policy":{"references":["each.value.ssl_policy","each.value"]},"target_groups":{"references":["var.target_groups"]},"tg_name":{"references":["each.value.tg_name","each.value"]},"tg_port":{"references":["each.value.tg_port","each.value"]},"tg_protocol":{"references":["each.value.tg_protocol","each.value"]},"tg_target_id":{"references":["each.value.tg_target_id","each.value"]},"tg_target_type":{"references":["each.value.tg_target_type","each.value"]},"vpc_id":{"references":["module.vpc.vpc_id","module.vpc"]}},"for_each_expression":{"references":["var.alb_configs"]},"module":{"outputs":{"alb_dns_name":{"expression":{"references":["aws_lb.this.dns_name","aws_lb.this"]}},"alb_zone_id":{"expression":{"references":["aws_lb.this.zone_id","aws_lb.this"]}},"listener_http_arn":{"expression":{"references":["aws_lb_listener.listener_http"]},"description":"List of HTTP listener ARNs for all ALBs"},"listener_https_arn":{"expression":{"references":["aws_lb_listener.listener_https"]},"description":"List of HTTPS listener ARNs for all ALBs"},"target_group_arns":{"expression":{"references":["aws_lb_target_group.tg"]},"description":"Map of Target Group ARNs"}},"resources":[{"address":"aws_lb.this","mode":"managed","type":"aws_lb","name":"this","provider_config_key":"aws","expressions":{"idle_timeout":{"references":["var.alb_idle_timeout"]},"internal":{"references":["var.alb_internal"]},"load_balancer_type":{"references":["var.alb_type"]},"name":{"references":["var.alb_name"]},"security_groups":{"references":["var.alb_security_groups"]},"subnets":{"references":["var.alb_subnets"]},"tags":{"references":["var.alb_name","var.environment"]}},"schema_version":0},{"address":"aws_lb_listener.listener_http","mode":"managed","type":"aws_lb_listener","name":"listener_http","provider_config_key":"aws","expressions":{"default_action":[{"redirect":[{"port":{"references":["var.redirect_http_port"]},"protocol":{"references":["var.redirect_http_protocol"]},"status_code":{"references":["var.redirect_http_status_code"]}}],"target_group_arn":{"references":["each.value.arn","each.value"]},"type":{"references":["var.default_http_action_type"]}}],"load_balancer_arn":{"references":["aws_lb.this.arn","aws_lb.this"]},"port":{"references":["var.listener_http_port"]},"protocol":{"references":["var.listener_http_protocol"]}},"schema_version":0,"for_each_expression":{"references":["aws_lb_target_group.tg"]}},{"address":"aws_lb_listener.listener_https","mode":"managed","type":"aws_lb_listener","name":"listener_https","provider_config_key":"aws","expressions":{"certificate_arn":{"references":["var.ssl_certificate_arn"]},"default_action":[{"target_group_arn":{"references":["each.value.arn","each.value"]},"type":{"references":["var.default_https_action_type"]}}],"load_balancer_arn":{"references":["aws_lb.this.arn","aws_lb.this"]},"port":{"references":["var.listener_https_port"]},"protocol":{"references":["var.listener_https_protocol"]},"ssl_policy":{"references":["var.ssl_policy"]}},"schema_version":0,"for_each_expression":{"references":["aws_lb_target_group.tg"]}},{"address":"aws_lb_target_group.tg","mode":"managed","type":"aws_lb_target_group","name":"tg","provider_config_key":"aws","expressions":{"health_check":[{"healthy_threshold":{"references":["var.health_check_healthy_threshold"]},"interval":{"references":["var.health_check_interval"]},"matcher":{"references":["each.value.health_check_matcher","each.value"]},"path":{"references":["each.value.health_check_path","each.value"]},"timeout":{"references":["var.health_check_timeout"]},"unhealthy_threshold":{"references":["var.health_check_unhealthy_threshold"]}}],"name":{"references":["each.value.name","each.value"]},"port":{"references":["each.value.port","each.value"]},"protocol":{"references":["each.value.protocol","each.value"]},"tags":{"references":["var.environment","each.value.name","each.value"]},"target_type":{"references":["each.value.target_type","each.value"]},"vpc_id":{"references":["var.vpc_id"]}},"schema_version":0,"for_each_expression":{"references":["var.target_groups"]}},{"address":"aws_lb_target_group_attachment.tg_attachment","mode":"managed","type":"aws_lb_target_group_attachment","name":"tg_attachment","provider_config_key":"aws","expressions":{"port":{"references":["var.tg_port"]},"target_group_arn":{"references":["each.value.arn","each.value"]},"target_id":{"references":["var.tg_target_id"]}},"schema_version":0,"for_each_expression":{"references":["aws_lb_target_group.tg"]}}],"variables":{"alb_idle_timeout":{"default":60,"description":"Idle timeout for the ALB"},"alb_internal":{"description":"Whether the ALB is internal"},"alb_name":{"description":"Name of the ALB"},"alb_security_groups":{"description":"Security groups associated with the ALB"},"alb_subnets":{"description":"Subnets for the ALB"},"alb_type":{"default":"application","description":"Type of the ALB"},"default_http_action_type":{"description":"Default action type for HTTP listener"},"default_https_action_type":{"description":"Default action type for HTTPS listener"},"environment":{"description":"Environment name"},"health_check_healthy_threshold":{"description":"Number of healthy checks before considering target healthy"},"health_check_interval":{"description":"Interval for health checks"},"health_check_matcher":{"description":"HTTP status codes to use when checking for a healthy response"},"health_check_path":{"description":"Path to check for health status"},"health_check_timeout":{"description":"Timeout for health checks"},"health_check_unhealthy_threshold":{"description":"Number of unhealthy checks before considering target unhealthy"},"listener_http_port":{"default":80,"description":"Port for HTTP listener"},"listener_http_protocol":{"default":"HTTP","description":"Protocol for HTTP listener"},"listener_https_port":{"default":443,"description":"Port for HTTPS listener"},"listener_https_protocol":{"default":"HTTPS","description":"Protocol for HTTPS listener"},"redirect_http_port":{"description":"Port to redirect HTTP traffic to"},"redirect_http_protocol":{"description":"Protocol to redirect HTTP traffic to"},"redirect_http_status_code":{"description":"Status code for HTTP redirect"},"ssl_certificate_arn":{"description":"ARN of the SSL certificate for HTTPS listener"},"ssl_policy":{"description":"SSL policy for HTTPS listener"},"target_groups":{"description":"Map of Target Groups configurations"},"tg_name":{"description":"Name of the target group"},"tg_port":{"description":"Port of the target group"},"tg_protocol":{"description":"Protocol of the target group"},"tg_target_id":{"description":"ID of the target to attach to the Target Group"},"tg_target_type":{"default":"instance","description":"Target type of the target group"},"vpc_id":{"description":"VPC ID where the ALB and target group are deployed"}}}},"ecs":{"source":"../../modules/ecs","expressions":{"autoscaling_desired_capacity":{"references":["var.autoscaling_desired_capacity"]},"autoscaling_max_size":{"references":["var.autoscaling_max_size"]},"autoscaling_min_size":{"references":["var.autoscaling_min_size"]},"ecs_clusters":{"references":["var.ecs_clusters"]},"ecs_execution_role_arn":{"references":["aws_iam_role.ecs_execution_role.arn","aws_iam_role.ecs_execution_role"]},"ecs_instance_name_prefix":{"references":["var.ecs_instance_name_prefix"]},"ecs_instance_profile_name":{"references":["aws_iam_instance_profile.ecs_instance_profile.name","aws_iam_instance_profile.ecs_instance_profile"]},"ecs_service_ami_name":{"references":["var.ecs_service_ami_name"]},"ecs_service_instance_type":{"references":["var.ecs_service_instance_type"]},"ecs_service_role_arn":{"references":["aws_iam_role.ecs_service_role.arn","aws_iam_role.ecs_service_role"]},"ecs_services":{"references":["var.ecs_services"]},"ecs_task_definitions":{"references":["var.ecs_task_definitions"]},"ecs_task_execution_policy_arn":{"references":["aws_iam_policy.ecs_task_execution_policy.arn","aws_iam_policy.ecs_task_execution_policy"]},"ecs_task_role_arn":{"references":["aws_iam_role.ecs_task_role.arn","aws_iam_role.ecs_task_role"]},"ecs_task_role_policy_arn":{"references":["aws_iam_policy.ecs_task_role_policy.arn","aws_iam_policy.ecs_task_role_policy"]},"lb_listener_http_arns":{"references":["module.alb"]},"lb_listener_https_arns":{"references":["module.alb"]},"private_subnet_ids":{"references":["module.vpc.private_subnet_ids","module.vpc"]},"security_group_ids":{"references":["module.sg.sg_ids[\"ecs_instance_sg\"]","module.sg.sg_ids","module.sg"]},"target_group_arns":{"references":["var.target_group_arns","var.target_group_arns","var.ecs_services"]}},"module":{"outputs":{"asg_name":{"expression":{"references":["aws_autoscaling_group.ecs.name","aws_autoscaling_group.ecs"]},"description":"Auto Scaling Group Name"},"ecs_cluster_ids":{"expression":{"references":["aws_ecs_cluster.this"]},"description":"ECS Cluster IDs"},"ecs_service_arns":{"expression":{"references":["aws_ecs_service.this"]},"description":"ECS Service ARNs"},"task_definition_arns":{"expression":{"references":["aws_ecs_task_definition.this"]},"description":"Task Definition ARNs"}},"resources":[{"address":"aws_autoscaling_group.ecs","mode":"managed","type":"aws_autoscaling_group","name":"ecs","provider_config_key":"aws","expressions":{"desired_capacity":{"references":["var.autoscaling_desired_capacity"]},"launch_template":[{"id":{"references":["aws_launch_template.ecs.id","aws_launch_template.ecs"]},"version":{"constant_value":"$Latest"}}],"max_size":{"references":["var.autoscaling_max_size"]},"min_size":{"references":["var.autoscaling_min_size"]},"tag":[{"key":{"constant_value":"Name"},"propagate_at_launch":{"constant_value":true},"value":{"references":["var.ecs_instance_name_prefix"]}}],"vpc_zone_identifier":{"references":["var.private_subnet_ids"]}},"schema_version":1},{"address":"aws_ecs_cluster.this","mode":"managed","type":"aws_ecs_cluster","name":"this","provider_config_key":"aws","expressions":{"name":{"references":["each.value.name","each.value"]}},"schema_version":0,"for_each_expression":{"references":["var.ecs_clusters"]}},{"address":"aws_ecs_service.this","mode":"managed","type":"aws_ecs_service","name":"this","provider_config_key":"aws","expressions":{"cluster":{"references":["aws_ecs_cluster.this","each.value.cluster_name","each.value"]},"desired_count":{"references":["each.value.desired_count","each.value"]},"iam_role":{"references":["var.ecs_service_role_arn"]},"launch_type":{"references":["each.value.launch_type","each.value"]},"load_balancer":[{"container_name":{"references":["each.value.container_name","each.value"]},"container_port":{"references":["each.value.container_port","each.value"]},"target_group_arn":{"references":["var.target_group_arns","each.key","var.target_group_arns","each.key"]}}],"name":{"references":["each.value.name","each.value"]},"network_configuration":[{"security_groups":{"references":["var.security_group_ids"]},"subnets":{"references":["var.private_subnet_ids"]}}],"task_definition":{"references":["aws_ecs_task_definition.this","each.value.task_definition_family","each.value"]}},"schema_version":1,"for_each_expression":{"references":["var.ecs_services"]}},{"address":"aws_ecs_task_definition.this","mode":"managed","type":"aws_ecs_task_definition","name":"this","provider_config_key":"aws","expressions":{"container_definitions":{"references":["each.value.container_definitions","each.value"]},"cpu":{"references":["each.value.cpu","each.value"]},"execution_role_arn":{"references":["var.ecs_execution_role_arn"]},"family":{"references":["each.value.family","each.value"]},"memory":{"references":["each.value.memory","each.value"]},"network_mode":{"references":["each.value.network_mode","each.value"]},"requires_compatibilities":{"references":["each.value.requires_compatibilities","each.value"]},"task_role_arn":{"references":["var.ecs_task_role_arn"]}},"schema_version":1,"for_each_expression":{"references":["var.ecs_task_definitions"]}},{"address":"aws_launch_template.ecs","mode":"managed","type":"aws_launch_template","name":"ecs","provider_config_key":"aws","expressions":{"iam_instance_profile":[{"name":{"references":["var.ecs_instance_profile_name"]}}],"image_id":{"references":["var.ecs_service_ami_name"]},"instance_type":{"references":["var.ecs_service_instance_type"]},"name_prefix":{"constant_value":"ecs-launch-template-"},"tag_specifications":[{"resource_type":{"constant_value":"instance"},"tags":{"references":["var.ecs_instance_name_prefix"]}}],"user_data":{"references":["aws_ecs_cluster.this[\"main\"].name","aws_ecs_cluster.this[\"main\"]","aws_ecs_cluster.this"]},"vpc_security_group_ids":{"references":["var.security_group_ids"]}},"schema_version":0}],"variables":{"autoscaling_desired_capacity":{"description":"Desired capacity for ASG"},"autoscaling_max_size":{"description":"Maximum size for ASG"},"autoscaling_min_size":{"description":"Minimum size for ASG"},"ecs_clusters":{"description":"List of ECS Clusters to create"},"ecs_execution_role_arn":{"description":"ARN of the ECS execution role"},"ecs_instance_name_prefix":{"description":"Prefix for ECS instance names"},"ecs_instance_profile_name":{"description":"IAM instance profile name for ECS instances"},"ecs_service_ami_name":{"description":"AMI name for ECS instances"},"ecs_service_instance_type":{"description":"Instance type for ECS service"},"ecs_service_role_arn":{"description":"ARN of the ECS service IAM role"},"ecs_services":{"description":"List of ECS Services"},"ecs_task_definitions":{"description":"List of ECS Task Definitions"},"ecs_task_execution_policy_arn":{"description":"ARN of the ECS task execution policy"},"ecs_task_role_arn":{"description":"ARN of the ECS task role"},"ecs_task_role_policy_arn":{"description":"ARN of the ECS task role policy"},"lb_listener_http_arns":{"description":"List of HTTP listener ARNs"},"lb_listener_https_arns":{"description":"List of HTTPS listener ARNs"},"private_subnet_ids":{"description":"List of private subnet IDs"},"security_group_ids":{"description":"List of security group IDs for ECS instances"},"target_group_arns":{"description":"List of Target Group ARNs for ECS Services"}}}},"rds":{"source":"../../modules/rds","expressions":{"allocated_storage":{"references":["var.allocated_storage"]},"db_engine":{"references":["var.db_engine"]},"db_engine_version":{"references":["var.db_engine_version"]},"db_instance_class":{"references":["var.db_instance_class"]},"db_name":{"references":["var.db_name"]},"db_parameter_group_name":{"references":["var.db_parameter_group_name"]},"db_password":{"references":["var.db_password"]},"db_security_group_ids":{"references":["module.sg.sg_ids[\"rds_sg\"]","module.sg.sg_ids","module.sg"]},"db_subnet_group_name":{"references":["var.db_subnet_group_name"]},"db_subnet_group_tag_name":{"references":["var.db_subnet_group_tag_name"]},"db_subnet_ids":{"references":["module.vpc.db_subnet_ids","module.vpc"]},"db_username":{"references":["var.db_username"]},"multi_az":{"references":["var.multi_az"]},"publicly_accessible":{"references":["var.publicly_accessible"]},"rds_environment":{"references":["var.rds_environment"]},"skip_final_snapshot":{"references":["var.skip_final_snapshot"]},"storage_type":{"references":["var.storage_type"]}},"module":{"outputs":{"db_instance_endpoint":{"expression":{"references":["aws_db_instance.rds.endpoint","aws_db_instance.rds"]},"description":"Endpoint of the RDS instance"},"db_instance_id":{"expression":{"references":["aws_db_instance.rds.id","aws_db_instance.rds"]},"description":"ID of the RDS instance"}},"resources":[{"address":"aws_db_instance.rds","mode":"managed","type":"aws_db_instance","name":"rds","provider_config_key":"aws","expressions":{"allocated_storage":{"references":["var.allocated_storage"]},"db_name":{"references":["var.db_name"]},"db_subnet_group_name":{"references":["aws_db_subnet_group.db_subnet_group.name","aws_db_subnet_group.db_subnet_group"]},"engine":{"references":["var.db_engine"]},"engine_version":{"references":["var.db_engine_version"]},"identifier":{"references":["var.rds_environment","var.db_name"]},"instance_class":{"references":["var.db_instance_class"]},"multi_az":{"references":["var.multi_az"]},"parameter_group_name":{"references":["var.db_parameter_group_name"]},"password":{"references":["var.db_password"]},"publicly_accessible":{"references":["var.publicly_accessible"]},"skip_final_snapshot":{"references":["var.skip_final_snapshot"]},"storage_type":{"references":["var.storage_type"]},"tags":{"references":["var.db_name","var.rds_environment"]},"username":{"references":["var.db_username"]},"vpc_security_group_ids":{"references":["var.db_security_group_ids"]}},"schema_version":2},{"address":"aws_db_subnet_group.db_subnet_group","mode":"managed","type":"aws_db_subnet_group","name":"db_subnet_group","provider_config_key":"aws","expressions":{"name":{"references":["var.db_subnet_group_name"]},"subnet_ids":{"references":["var.db_subnet_ids"]},"tags":{"references":["var.db_subnet_group_tag_name","var.rds_environment"]}},"schema_version":0}],"variables":{"allocated_storage":{"description":"Storage size in GB"},"db_engine":{"description":"Engine type of the RDS instance"},"db_engine_version":{"description":"Engine version of the RDS instance"},"db_instance_class":{"description":"Instance class of the RDS instance"},"db_name":{"description":"Name of the database"},"db_parameter_group_name":{"description":"Name of the DB parameter group"},"db_password":{"description":"Password for the database","sensitive":true},"db_security_group_ids":{"description":"Security group IDs for the RDS instance"},"db_subnet_group_name":{"description":"Name of the DB subnet group"},"db_subnet_group_tag_name":{"description":"Tag name for the DB subnet group"},"db_subnet_ids":{"description":"List of subnet IDs for the DB subnet group"},"db_username":{"description":"Username for the database"},"multi_az":{"default":false,"description":"Enable Multi-AZ deployment"},"publicly_accessible":{"default":false,"description":"Whether the DB instance is publicly accessible"},"rds_environment":{"description":"Environment name"},"skip_final_snapshot":{"default":true,"description":"Skip final snapshot before deletion"},"storage_type":{"default":"gp2","description":"Storage type of the DB instance"}}}},"sg":{"source":"../../modules/sg","expressions":{"sg_configs":{"references":["var.sg_configs"]},"sg_rules":{"references":["var.sg_rules"]},"vpc_id":{"references":["module.vpc.vpc_id","module.vpc"]}},"module":{"outputs":{"sg_ids":{"expression":{"references":["aws_security_group.sg[\"alb_sg\"].id","aws_security_group.sg[\"alb_sg\"]","aws_security_group.sg","aws_security_group.sg[\"ecs_sg\"].id","aws_security_group.sg[\"ecs_sg\"]","aws_security_group.sg","aws_security_group.sg[\"ecs_instance_sg\"].id","aws_security_group.sg[\"ecs_instance_sg\"]","aws_security_group.sg","aws_security_group.sg[\"rds_sg\"].id","aws_security_group.sg[\"rds_sg\"]","aws_security_group.sg"]},"description":"Map of security group IDs"}},"resources":[{"address":"aws_security_group.sg","mode":"managed","type":"aws_security_group","name":"sg","provider_config_key":"aws","expressions":{"description":{"references":["each.value.description","each.value"]},"name":{"references":["each.value.name","each.value"]},"tags":{"references":["each.value.name","each.value"]},"vpc_id":{"references":["var.vpc_id"]}},"schema_version":1,"for_each_expression":{"references":["var.sg_configs"]}},{"address":"aws_security_group_rule.egress","mode":"managed","type":"aws_security_group_rule","name":"egress","provider_config_key":"aws","expressions":{"cidr_blocks":{"references":["each.value.cidr_blocks","each.value"]},"description":{"references":["each.value.description","each.value"]},"from_port":{"references":["each.value.from_port","each.value"]},"protocol":{"references":["each.value.protocol","each.value"]},"security_group_id":{"references":["aws_security_group.sg","each.value.sg_name","each.value"]},"to_port":{"references":["each.value.to_port","each.value"]},"type":{"constant_value":"egress"}},"schema_version":2,"for_each_expression":{"references":["var.sg_rules"]}},{"address":"aws_security_group_rule.ingress_cidr","mode":"managed","type":"aws_security_group_rule","name":"ingress_cidr","provider_config_key":"aws","expressions":{"cidr_blocks":{"references":["each.value.cidr_blocks","each.value"]},"description":{"references":["each.value.description","each.value"]},"from_port":{"references":["each.value.from_port","each.value"]},"protocol":{"references":["each.value.protocol","each.value"]},"security_group_id":{"references":["aws_security_group.sg","each.value.sg_name","each.value"]},"to_port":{"references":["each.value.to_port","each.value"]},"type":{"constant_value":"ingress"}},"schema_version":2,"for_each_expression":{"references":["var.sg_rules"]}},{"address":"aws_security_group_rule.ingress_self","mode":"managed","type":"aws_security_group_rule","name":"ingress_self","provider_config_key":"aws","expressions":{"description":{"references":["each.value.description","each.value"]},"from_port":{"references":["each.value.from_port","each.value"]},"protocol":{"references":["each.value.protocol","each.value"]},"security_group_id":{"references":["aws_security_group.sg","each.value.sg_name","each.value"]},"self":{"constant_value":true},"to_port":{"references":["each.value.to_port","each.value"]},"type":{"constant_value":"ingress"}},"schema_version":2,"for_each_expression":{"references":["var.sg_rules"]}},{"address":"aws_security_group_rule.ingress_sg","mode":"managed","type":"aws_security_group_rule","name":"ingress_sg","provider_config_key":"aws","expressions":{"description":{"references":["each.value.description","each.value"]},"from_port":{"references":["each.value.from_port","each.value"]},"protocol":{"references":["each.value.protocol","each.value"]},"security_group_id":{"references":["aws_security_group.sg","each.value.sg_name","each.value"]},"source_security_group_id":{"references":["aws_security_group.sg","each.value.source_security_group_id","each.value"]},"to_port":{"references":["each.value.to_port","each.value"]},"type":{"constant_value":"ingress"}},"schema_version":2,"for_each_expression":{"references":["var.sg_rules"]}}],"variables":{"sg_configs":{"description":"Map of security group configurations"},"sg_rules":{"description":"Map of security group rules"},"vpc_id":{"description":"VPC ID where security groups will be created"}}}},"vpc":{"source":"../../modules/vpc","expressions":{"availability_zones":{"references":["var.availability_zones"]},"db_subnets_cidr":{"references":["var.db_subnets_cidr"]},"environment":{"references":["var.environment"]},"private_subnets_cidr":{"references":["var.private_subnets_cidr"]},"public_subnets_cidr":{"references":["var.public_subnets_cidr"]},"vpc_cidr":{"references":["var.vpc_cidr"]}},"module":{"outputs":{"db_subnet_ids":{"expression":{"references":["aws_subnet.db"]},"description":"DB Subnet IDs"},"internet_gateway_id":{"expression":{"references":["aws_internet_gateway.igw.id","aws_internet_gateway.igw"]},"description":"The Internet Gateway ID"},"nat_gateway_id":{"expression":{"references":["aws_nat_gateway.nat.id","aws_nat_gateway.nat"]},"description":"NAT Gateway ID"},"private_subnet_ids":{"expression":{"references":["aws_subnet.private"]},"description":"Private Subnet IDs"},"public_subnet_ids":{"expression":{"references":["aws_subnet.public"]},"description":"Public Subnet IDs"},"vpc_id":{"expression":{"references":["aws_vpc.main.id","aws_vpc.main"]},"description":"VPC ID"}},"resources":[{"address":"aws_eip.nat_eip","mode":"managed","type":"aws_eip","name":"nat_eip","provider_config_key":"aws","expressions":{"tags":{"references":["var.environment"]}},"schema_version":0},{"address":"aws_internet_gateway.igw","mode":"managed","type":"aws_internet_gateway","name":"igw","provider_config_key":"aws","expressions":{"tags":{"references":["var.environment"]},"vpc_id":{"references":["aws_vpc.main.id","aws_vpc.main"]}},"schema_version":0},{"address":"aws_nat_gateway.nat","mode":"managed","type":"aws_nat_gateway","name":"nat","provider_config_key":"aws","expressions":{"allocation_id":{"references":["aws_eip.nat_eip.id","aws_eip.nat_eip"]},"subnet_id":{"references":["aws_subnet.public[\"0\"].id","aws_subnet.public[\"0\"]","aws_subnet.public"]},"tags":{"references":["var.environment"]}},"schema_version":0},{"address":"aws_route_table.private","mode":"managed","type":"aws_route_table","name":"private","provider_config_key":"aws","expressions":{"route":{"references":["aws_nat_gateway.nat.id","aws_nat_gateway.nat"]},"tags":{"references":["var.environment"]},"vpc_id":{"references":["aws_vpc.main.id","aws_vpc.main"]}},"schema_version":0},{"address":"aws_route_table.public","mode":"managed","type":"aws_route_table","name":"public","provider_config_key":"aws","expressions":{"route":{"references":["aws_internet_gateway.igw.id","aws_internet_gateway.igw"]},"tags":{"references":["var.environment"]},"vpc_id":{"references":["aws_vpc.main.id","aws_vpc.main"]}},"schema_version":0},{"address":"aws_route_table_association.private_assoc","mode":"managed","type":"aws_route_table_association","name":"private_assoc","provider_config_key":"aws","expressions":{"route_table_id":{"references":["aws_route_table.private.id","aws_route_table.private"]},"subnet_id":{"references":["each.value.id","each.value"]}},"schema_version":0,"for_each_expression":{"references":["aws_subnet.private"]}},{"address":"aws_route_table_association.public_assoc","mode":"managed","type":"aws_route_table_association","name":"public_assoc","provider_config_key":"aws","expressions":{"route_table_id":{"references":["aws_route_table.public.id","aws_route_table.public"]},"subnet_id":{"references":["each.value.id","each.value"]}},"schema_version":0,"for_each_expression":{"references":["aws_subnet.public"]}},{"address":"aws_subnet.db","mode":"managed","type":"aws_subnet","name":"db","provider_config_key":"aws","expressions":{"availability_zone":{"references":["var.availability_zones","each.key"]},"cidr_block":{"references":["each.value"]},"tags":{"references":["var.environment","each.key"]},"vpc_id":{"references":["aws_vpc.main.id","aws_vpc.main"]}},"schema_version":1,"for_each_expression":{"references":["var.db_subnets_cidr"]}},{"address":"aws_subnet.private","mode":"managed","type":"aws_subnet","name":"private","provider_config_key":"aws","expressions":{"availability_zone":{"references":["var.availability_zones","each.key"]},"cidr_block":{"references":["each.value"]},"tags":{"references":["var.environment","each.key"]},"vpc_id":{"references":["aws_vpc.main.id","aws_vpc.main"]}},"schema_version":1,"for_each_expression":{"references":["var.private_subnets_cidr"]}},{"address":"aws_subnet.public","mode":"managed","type":"aws_subnet","name":"public","provider_config_key":"aws","expressions":{"availability_zone":{"references":["var.availability_zones","each.key"]},"cidr_block":{"references":["each.value"]},"map_public_ip_on_launch":{"constant_value":true},"tags":{"references":["var.environment","each.key"]},"vpc_id":{"references":["aws_vpc.main.id","aws_vpc.main"]}},"schema_version":1,"for_each_expression":{"references":["var.public_subnets_cidr"]}},{"address":"aws_vpc.main","mode":"managed","type":"aws_vpc","name":"main","provider_config_key":"aws","expressions":{"cidr_block":{"references":["var.vpc_cidr"]},"tags":{"references":["var.environment"]}},"schema_version":1}],"variables":{"availability_zones":{"description":"Map of availability zones for subnets"},"db_subnets_cidr":{"description":"List of CIDR blocks for database subnets"},"environment":{"description":"Environment name (e.g., dev, prod)"},"private_subnets_cidr":{"description":"List of CIDR blocks for private subnets"},"public_subnets_cidr":{"description":"List of CIDR blocks for public subnets"},"vpc_cidr":{"description":"CIDR block for the VPC"}}}}},"variables":{"alb_configs":{"description":"Configuration for multiple ALBs"},"allocated_storage":{"description":"Allocated storage for the DB instance"},"autoscaling_desired_capacity":{"description":"Desired capacity for ASG"},"autoscaling_max_size":{"description":"Maximum size for ASG"},"autoscaling_min_size":{"description":"Minimum size for ASG"},"availability_zones":{"description":"Map of availability zones for subnets"},"db_engine":{"description":"Database engine"},"db_engine_version":{"description":"Database engine version"},"db_instance_class":{"description":"Database instance class"},"db_name":{"description":"Database name"},"db_parameter_group_name":{"description":"Parameter group name for the DB instance"},"db_password":{"description":"Database password","sensitive":true},"db_security_group_ids":{"description":"Security group IDs for the RDS instance"},"db_subnet_group_name":{"description":"DB Subnet Group Name"},"db_subnet_group_tag_name":{"description":"DB Subnet Group Tag Name"},"db_subnet_ids":{"description":"List of subnet IDs for the DB subnet group"},"db_subnets_cidr":{"description":"List of CIDR blocks for database subnets"},"db_username":{"description":"Database username"},"ecs_clusters":{"description":"List of ECS Clusters to create"},"ecs_instance_name_prefix":{"description":"Prefix for ECS instance names"},"ecs_instance_profile_name":{"description":"IAM instance profile name for ECS instances"},"ecs_service_ami_name":{"description":"AMI name for ECS instances"},"ecs_service_instance_type":{"description":"Instance type for ECS service"},"ecs_services":{"description":"List of ECS Services"},"ecs_task_definitions":{"description":"List of ECS Task Definitions"},"environment":{"description":"Environment name (e.g., dev, prod)"},"multi_az":{"description":"Enable Multi-AZ for the DB instance"},"private_subnet_ids":{"default":[],"description":"List of private subnet IDs"},"private_subnets_cidr":{"description":"List of CIDR blocks for private subnets"},"public_subnets_cidr":{"description":"List of CIDR blocks for public subnets"},"publicly_accessible":{"description":"Is the DB publicly accessible?"},"rds_environment":{"description":"Environment name (e.g., dev, prod)"},"sg_configs":{"description":"List of security group configurations"},"sg_rules":{"description":"List of security group rules"},"skip_final_snapshot":{"description":"Skip final snapshot on deletion"},"storage_type":{"description":"Storage type for the DB instance"},"target_group_arns":{"default":{},"description":"Map of Target Group ARNs for ECS Services"},"target_groups":{"default":{"example_tg":{"health_check_interval":30,"health_check_matcher":"200","health_check_path":"/","health_check_timeout":5,"healthy_threshold":3,"name":"","port":80,"protocol":"HTTP","target_type":"instance","tg_target_id":"","unhealthy_threshold":3}},"description":"Map of Target Groups configurations"},"vpc_cidr":{"description":"CIDR block for the VPC"}}}},"relevant_attributes":[{"resource":"module.ecs.aws_launch_template.ecs","attribute":["id"]},{"resource":"module.vpc.aws_subnet.db","attribute":[]},{"resource":"module.sg.aws_security_group.sg[\"ecs_sg\"]","attribute":["id"]},{"resource":"module.sg.aws_security_group.sg[\"rds_sg\"]","attribute":["id"]},{"resource":"module.alb[\"public_alb\"].aws_lb_listener.listener_https","attribute":[]},{"resource":"module.ecs.aws_autoscaling_group.ecs","attribute":["name"]},{"resource":"module.sg.aws_security_group.sg","attribute":[]},{"resource":"module.vpc.aws_route_table.private","attribute":["id"]},{"resource":"aws_iam_role.ecs_execution_role","attribute":["arn"]},{"resource":"module.vpc.aws_nat_gateway.nat","attribute":["id"]},{"resource":"module.rds.aws_db_subnet_group.db_subnet_group","attribute":["name"]},{"resource":"module.alb[\"private_alb\"].aws_lb_target_group.tg","attribute":[]},{"resource":"module.alb[\"public_alb\"].aws_lb.this","attribute":["zone_id"]},{"resource":"aws_iam_policy.ecs_task_role_policy","attribute":["arn"]},{"resource":"module.vpc.aws_subnet.public[\"0\"]","attribute":["id"]},{"resource":"module.alb[\"private_alb\"].aws_lb.this","attribute":["arn"]},{"resource":"aws_iam_role.ecs_task_role","attribute":["arn"]},{"resource":"module.vpc.aws_eip.nat_eip","attribute":["id"]},{"resource":"module.ecs.aws_ecs_cluster.this[\"main\"]","attribute":["name"]},{"resource":"module.ecs.aws_ecs_task_definition.this","attribute":[]},{"resource":"module.alb[\"private_alb\"].aws_lb.this","attribute":["dns_name"]},{"resource":"module.alb[\"private_alb\"].aws_lb_listener.listener_https","attribute":[]},{"resource":"aws_iam_role.ecs_task_role","attribute":["name"]},{"resource":"aws_iam_role.ecs_service_role","attribute":["name"]},{"resource":"module.alb[\"public_alb\"].aws_lb.this","attribute":["arn"]},{"resource":"module.sg.aws_security_group.sg[\"alb_sg\"]","attribute":["id"]},{"resource":"module.alb[\"public_alb\"].aws_lb_target_group.tg","attribute":[]},{"resource":"module.rds.aws_db_instance.rds","attribute":["id"]},{"resource":"aws_iam_instance_profile.ecs_instance_profile","attribute":["name"]},{"resource":"aws_iam_role.ecs_execution_role","attribute":["name"]},{"resource":"module.vpc.aws_internet_gateway.igw","attribute":["id"]},{"resource":"module.alb[\"public_alb\"].aws_lb_listener.listener_http","attribute":[]},{"resource":"module.alb[\"private_alb\"].aws_lb_listener.listener_http","attribute":[]},{"resource":"aws_iam_role.ecs_service_role","attribute":["arn"]},{"resource":"aws_iam_policy.ecs_task_execution_policy","attribute":["arn"]},{"resource":"module.vpc.aws_route_table.public","attribute":["id"]},{"resource":"module.vpc.aws_subnet.private","attribute":[]},{"resource":"module.vpc.aws_subnet.public","attribute":[]},{"resource":"module.rds.aws_db_instance.rds","attribute":["endpoint"]},{"resource":"aws_iam_policy.ecs_service_policy","attribute":["arn"]},{"resource":"module.vpc.aws_vpc.main","attribute":["id"]},{"resource":"module.alb[\"public_alb\"].aws_lb.this","attribute":["dns_name"]},{"resource":"module.alb[\"private_alb\"].aws_lb.this","attribute":["zone_id"]},{"resource":"module.ecs.aws_ecs_service.this","attribute":[]},{"resource":"module.ecs.aws_ecs_cluster.this","attribute":[]},{"resource":"module.sg.aws_security_group.sg[\"ecs_instance_sg\"]","attribute":["id"]}],"timestamp":"2024-09-20T02:10:20Z"}
